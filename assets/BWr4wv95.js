import{_ as Q,L as W,M as S,N as X,r as u,i as j,o as q,O as m,A as n,P as J,a6 as ee,t as d,z as s,Q as t,B as w,R as v,v as C,ac as te,S as ae,T as oe,U as ne,V as se,W as le,X as ue,Y as re,Z as de,$ as me,a0 as ie,a5 as ce,y as pe,a8 as _e,a9 as ve,aa as ye}from"./BeL7Np4Z.js";import{_ as be}from"./0ODLm9tx.js";import{u as fe}from"./DvPt3fJ_.js";const ge={key:0,class:"inner-content"},we={__name:"index",setup(Ie){fe();const I=W(),{removeExpenseFromStore:M,editExpense:T,getExpensePhoto:ke}=I,{currentExpense:e}=S(I),{billCategories:D}=_e(),{openAlert:N}=ve(),U=X(),{uid:r}=S(U),k=J(),x=u(""),B=u(null),E=u(null);u(!1);const y=u(e.value.shop),b=u(e.value.name),f=u(e.value.value),i=u(e.value.timestamp),V=u(e.value.familyMembers),g=j(()=>x.value||e.value.category),z=()=>{let l;e.value.timestamp.seconds?l=new Date(e.value.timestamp.seconds*1e3):l=new Date(e.value.timestamp);const a=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,"0"),p=String(l.getDate()).padStart(2,"0");i.value=`${a}-${c}-${p}`},$=async()=>{const l={name:b.value,value:Number(f.value),timestamp:new Date(i.value).getTime(),shop:y.value,familyMembers:V.value,userId:e.value.userId,id:e.value.id,category:x.value};await T(l,B.value,E.value),k.back()},F=async()=>{await M(e.value.id),k.back()};q(async()=>{z()}),console.log(e.value);const P=l=>{V.value=l};return(l,a)=>{const c=ne,p=se,R=le,A=ue,_=re,L=ye,O=de,Y=me,Z=be,h=ie,G=ce,H=ee;return d(),m(H,null,{default:n(()=>[s(A,{style:{background:"var(--ion-color-light)"}},{default:n(()=>[s(R,null,{default:n(()=>[t(e)&&t(e).userId===t(r)?(d(),m(p,{key:0,slot:"start"},{default:n(()=>[s(c,{type:"tertiary",strong:!0,color:"danger",onClick:a[0]||(a[0]=()=>t(N)("Usuwanie wydatku","Czy na pewno chcesz usunąć wydatek?","alert-button-confirm",F))},{default:n(()=>[w("Usuń")]),_:1})]),_:1})):v("",!0),t(e)&&t(e).userId===t(r)?(d(),m(p,{key:1,slot:"end"},{default:n(()=>[s(c,{type:"tertiary",strong:!0,color:"success",onClick:a[1]||(a[1]=o=>$())},{default:n(()=>[w("Zapisz")]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1}),s(G,{fullscreen:!0},{default:n(()=>[t(e)?(d(),C("div",ge,[s(h,{lines:"none"},{default:n(()=>[s(_,{label:"Nazwa sklepu",type:"text",modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=o=>y.value=o),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(_,{label:"Nazwa wydatku",type:"text",modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=o=>b.value=o),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(_,{label:"Całkowita kwota",type:"number",modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=o=>f.value=o),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(_,{label:"Data",type:"date",modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=o=>i.value=o),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(Y,null,{default:n(()=>[s(O,{label:"Kategoria","label-placement":"stacked",modelValue:t(g),"onUpdate:modelValue":a[6]||(a[6]=o=>te(g)?g.value=o:null)},{default:n(()=>[(d(!0),C(ae,null,oe(t(D),(o,K)=>(d(),m(L,{key:K,value:o},{default:n(()=>[w(pe(o),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(e).userId===t(r)?(d(),m(Z,{key:0,members:t(e).familyMembers,onToggleMember:P},null,8,["members"])):v("",!0)]),_:1})])):v("",!0)]),_:1})]),_:1})}}},Ce=Q(we,[["__scopeId","data-v-e5765973"]]);export{Ce as default};
