import{_ as j,t as n,N as c,A as e,v as y,R as B,Q as R,B as k,y as p,aD as N,L as O,r as T,o as V,z as t,O as o,x as d,P as w,W as C,b5 as D,aC as F,a1 as G,ag as H,b6 as Q,G as U,i as W,aQ as q,Z as E,T as X,U as Y,S as Z,V as J,a5 as K,X as ee,a7 as ne,Y as te,$ as oe,b7 as se}from"./CJWsRK-Q.js";import{_ as ae}from"./DDnUFzLS.js";import{_ as ie}from"./B8fMttEA.js";const ce={__name:"ingredients-list",props:{ingredients:{type:Array,required:!0,default:()=>[]}},setup(m){return(x,$)=>{const s=ae,f=ie;return n(),c(f,{inset:!0,lines:!0,class:"p-2","bg-white":!0},{default:e(()=>[(n(!0),y(B,null,R(m.ingredients,l=>(n(),c(s,{key:l.id},{start:e(()=>[k(p(l.name),1)]),_:2},1024))),128))]),_:1})}}},le=j(ce,[["__scopeId","data-v-73e57f11"]]),re={key:0,class:"inner-content py-2"},ue={class:"line-through"},_e=d("span",null," dodane",-1),pe={class:"line-through"},de=d("span",null," dodane",-1),me={__name:"add-recipe-to-shopping-list-modal",props:{recipe:{type:Object,default:()=>{}},cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(m){const x=N(),{updateShoppingList:$,getAllShoppingLists:s}=x,{shoppingLists:f,collaboratedShoppingLists:l}=O(x),h=m,L=T(!1),i=T(""),g=async u=>{const r=u.recipes;if(L.value=!0,r.find(_=>_.name===h.recipe.name)){const _=r.findIndex(b=>b.name===h.recipe.name);i.value=`Przepis "${h.recipe.name}" został usunięty z listy "${u.name}"`,r.splice(_,1)}else i.value=`Przepis "${h.recipe.name}" został dodany do listy "${u.name}"`,r.push(h.recipe);setTimeout(()=>{L.value=!1},2e3),await $({...u,recipes:r}),u.recipes=r};return V(async()=>{await s()}),(u,r)=>{const _=C,b=D,I=F,S=G,v=H;return m.recipe?(n(),y("div",re,[t(_,{class:"text-lg text-center"},{default:e(()=>[k("Wybierz listę do której chcesz dodać przepis")]),_:1}),t(v,{inset:!0,lines:"inset"},{default:e(()=>[t(b,null,{default:e(()=>[k(" Twoje listy ")]),_:1}),(n(!0),y(B,null,R(o(f),a=>(n(),c(S,{onClick:()=>g(a),key:a.id},{default:e(()=>[a.recipes.find(z=>z.name===m.recipe.name)?(n(),c(I,{key:1},{default:e(()=>[d("span",ue,p(a.name),1),_e]),_:2},1024)):(n(),c(I,{key:0},{default:e(()=>[d("p",null,p(a.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1}),o(l)&&o(l).length?(n(),c(_,{key:0,class:"text-lg"},{default:e(()=>[k("Listy do których zostałeś zaproszony")]),_:1})):w("",!0),t(v,{inset:!0,lines:"inset"},{default:e(()=>[(n(!0),y(B,null,R(o(l),a=>(n(),c(S,{onClick:()=>g(a),key:a.id},{default:e(()=>[a.recipes.find(z=>z.name===m.recipe.name)?(n(),c(I,{key:1},{default:e(()=>[d("span",pe,p(a.name),1),de]),_:2},1024)):(n(),c(I,{key:0},{default:e(()=>[d("p",null,p(a.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1})])):w("",!0)}}},fe=["href"],he=d("h3",null,"Składniki",-1),ge={key:1},ye={key:2},Le={__name:"index",setup(m){const x=q(),$=Q(),{currentRecipe:s}=O($),f=T(),l=()=>f.value.$el.dismiss(null,"cancel"),h=()=>f.value.$el.dismiss(null,"confirm");U(x,async(i,g)=>{l()});const L=W(()=>{if(s.value.url){const i=/(https?:\/\/)?(www\.)?[\w\-]+\.(com|com\.pl|pl)/,g=s.value.url.match(i);return g?g[0]:null}return""});return(i,g)=>{const u=X,r=Y,_=Z,b=J,I=C,S=K,v=le,a=ee,z=me,P=ne,A=te,M=E;return n(),c(M,null,{default:e(()=>[t(I,{style:{background:"var(--ion-color-light)"}},{default:e(()=>[t(b,null,{default:e(()=>[t(r,{slot:"start"},{default:e(()=>[t(u,{text:"",icon:"ioniconsArrowBackOutline"in i?i.ioniconsArrowBackOutline:o(oe)},null,8,["icon"])]),_:1}),t(_,null,{default:e(()=>[k("Przepisy")]),_:1})]),_:1})]),_:1}),t(A,null,{default:e(()=>[d("h2",null,p(o(s).name),1),o(L)?(n(),y("a",{key:0,href:o(s).url,class:"flex items-center"},[t(S,{size:"small",icon:"ioniconsGlobeOutline"in i?i.ioniconsGlobeOutline:o(se),class:"mr-1"},null,8,["icon"]),k(" "+p(o(L)),1)],8,fe)):w("",!0),he,t(v,{ingredients:o(s).ingredients},null,8,["ingredients"]),o(s).steps?(n(),y("h3",ge,"Przepis")):w("",!0),o(s).steps?(n(),y("p",ye,p(o(s).steps),1)):w("",!0),t(a,{class:"mt-8",id:"open-recipe-to-shopping-list-modal"},{default:e(()=>[k(" Dodaj do listy zakupowej ")]),_:1}),t(P,{class:"auto-height",ref_key:"modal",ref:f,trigger:"open-recipe-to-shopping-list-modal"},{default:e(()=>[t(z,{cancel:l,"confirm-modal":h,recipe:o(s)},null,8,["recipe"])]),_:1},512)]),_:1})]),_:1})}}};export{Le as default};
