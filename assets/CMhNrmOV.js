import{_ as j,t as l,N as v,A as o,B as w,y as _,a9 as oe,T as W,v as $,R as U,S as q,L as Q,M as H,i as I,z as e,P as n,Q as B,aa as X,ab as se,ac as le,d as ae,x as d,Z as ie,r as ce,a2 as re,l as L,ad as ue,a7 as de,a8 as _e,U as pe,V as me,W as fe,ae as ve,af as ye,$ as be,ag as xe,ah as he,a1 as ke,C as Ce,D as ge}from"./WOMjux0z.js";import{c as O,a as we,b as $e,f as Ie,d as Se}from"./CHVAF33P.js";import{u as Be}from"./gsAAqd4S.js";const Oe={__name:"filter-tab",props:{filter:{type:Object,required:!0},active:{type:String,required:!0}},emits:["click"],setup(a,{emit:m}){const s=m;return(x,f)=>{const u=W;return l(),v(u,{onClick:f[0]||(f[0]=c=>s("click",a.filter)),class:oe(["text-xl",{active:a.active===a.filter.value}]),size:"small",type:"tertiary"},{default:o(()=>[w(_(a.filter.label),1)]),_:1},8,["class"])}}},Ne=j(Oe,[["__scopeId","data-v-1100ad1c"]]),Ee={class:"flex justify-between w-full mb-4"},ze={__name:"filter-tabs",props:{filters:{type:Array,default:()=>[]},active:{type:String,default:"Wszystkie"}},emits:["click"],setup(a,{emit:m}){const s=m;return(x,f)=>{const u=Ne;return l(),$("div",Ee,[(l(!0),$(U,null,q(a.filters,c=>(l(),v(u,{key:c,filter:c,active:a.active,onClick:r=>s("click",c)},null,8,["filter","active","onClick"]))),128))])}}},Fe={class:"flex overflow-auto gap-2 w-full"},Pe={__name:"filter-pills",props:{filters:{type:Array,default:()=>[]}},setup(a){const m=Q(),{selectedPeriod:s,startDate:x,endDate:f,shopName:u,expenseName:c,startPrice:r,endPrice:y,category:N}=H(m),{queryExpenses:P,updatePeriod:D,updateEndDate:T,updateStartDate:R,updateStartPrice:E,updateEndPrice:M,updateShopName:t,updateExpenseName:z,updateCategory:V}=m,A=I(()=>s.value.label?s.value.label:x.value&&f.value?`${x.value} - ${f.value}`:""),S=I(()=>r.value&&y.value?`${r.value} - ${y.value}`:r.value?`od ${r.value}`:y.value?`do ${y.value}`:""),b=async i=>{switch(i){case"shopName":t("");break;case"expenseName":z("");break;case"category":V("");break;case"priceRange":E(""),M("");break;case"selectedPeriod":D({value:"month",label:"Bieżący miesiąc"});break}await P()};return(i,p)=>{const k=X,C=se,h=le;return l(),$("div",Fe,[e(h,null,{default:o(()=>[w(_(n(A))+" ",1),n(s).value!=="month"?(l(),v(C,{key:0,fill:"clear",size:"small",onClick:p[0]||(p[0]=g=>b("selectedPeriod"))},{default:o(()=>[e(k,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:n(O)},null,8,["icon"])]),_:1})):B("",!0)]),_:1}),n(u)?(l(),v(h,{key:0},{default:o(()=>[w(_(n(u))+" ",1),e(C,{fill:"clear",size:"small",onClick:p[1]||(p[1]=g=>b("shopName"))},{default:o(()=>[e(k,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:n(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),n(N)?(l(),v(h,{key:1},{default:o(()=>[w(_(n(N))+" ",1),e(C,{fill:"clear",size:"small",onClick:p[2]||(p[2]=g=>b("category"))},{default:o(()=>[e(k,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:n(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),n(c)?(l(),v(h,{key:2},{default:o(()=>[w(_(n(c))+" ",1),e(C,{fill:"clear",size:"small",onClick:p[3]||(p[3]=g=>b("expenseName"))},{default:o(()=>[e(k,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:n(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),n(S)?(l(),v(h,{key:3},{default:o(()=>[w(_(n(S))+" ",1),e(C,{fill:"clear",size:"small",onClick:p[4]||(p[4]=g=>b("priceRange"))},{default:o(()=>[e(k,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:n(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0)])}}},De=j(Pe,[["__scopeId","data-v-f812e33d"]]),Te={class:"flex h-full w-full justify-between items-start"},Me={class:"flex flex-col"},Ve={class:"flex-flex-col"},Ae={class:"text-base expense-shop"},Le={class:"text-lg font-bold expense-date"},je={class:"flex items-end font-bold"},Re={class:"flex items-start"},We={class:"text-3xl price-big"},Ue={class:"text-sm price-small"},qe=ae({__name:"item",props:{expense:{}},emits:["openEditExpense","removeExpense"],setup(a,{emit:m}){const s=a,x=I(()=>parseInt(s.expense.value)),f=I(()=>(Number(s.expense.value)-Math.floor(Number(s.expense.value))).toFixed(2).toString().slice(2)),u=I(()=>s.expense.timestamp.seconds?new Date(s.expense.timestamp.seconds*1e3).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}):new Date(s.expense.timestamp).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}));return(c,r)=>{const y=ie;return l(),v(y,{class:"flex flex-col py-2 pl-6 pr-2 bg-white rounded-2xl shadow-lg"},{default:o(()=>[d("div",Te,[d("div",Me,[d("div",Ve,[d("p",Ae,_(c.expense.shop)+" - "+_(c.expense.name)+" - "+_(c.expense.category.toLowerCase()),1)]),d("p",Le,_(n(u)),1)]),d("div",je,[d("p",Re,[d("span",We,_(n(x)),1),d("span",Ue,_(n(f)),1)])])])]),_:1})}}}),Z=a=>(Ce("data-v-c8897a6a"),a=a(),ge(),a),Qe={key:0,class:"w-full flex justify-center items-center h-full"},He={key:1},Xe=Z(()=>d("h2",null,"Brak wydatków",-1)),Ze={key:2,class:"h-full overflow-auto"},Ge={class:"text-2xl my-4 flex justify-between font-bold"},Je=Z(()=>d("span",null,"Razem ",-1)),Ke={__name:"index",setup(a){const m=localStorage.getItem("uid"),s=Q(),{queryExpenses:x,setCurrentExpense:f}=s,{expenses:u,isLoading:c}=H(s),r=ce("all"),y=[{value:"all",label:"Wszystkie"},{value:"my",label:"Moje"},{value:"common",label:"Wspólne"}];Be(async()=>{await x()},"$biXQIOSgVL");const N=t=>{f(t),L(`/expenses/${t.id}`)},P=()=>{L("/expenses/new")},D=I(()=>parseFloat(T.value.reduce((t,z)=>Number(t)+Number(z.value),0)).toFixed(2)),T=I(()=>r.value==="all"?u.value:r.value==="my"?u.value.filter(t=>t.userId===m&&t.familyMembers.length===0):u.value.filter(t=>t.userId===m&&t.familyMembers.length>0||t.familyMembers.includes(m))),R=async()=>{await ue.open("expense-filter")},E=t=>{t.label==="Wszystkie"?r.value="all":t.label==="Moje"?r.value="my":r.value="common"},M=()=>{L("/expenses/charts")};return(t,z)=>{const V=de,A=_e,S=pe,b=X,i=W,p=me,k=fe,C=ve,h=ze,g=De,G=ye,J=qe,K=be,Y=xe,ee=he,ne=ke,te=re;return l(),v(te,null,{default:o(()=>[e(k,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[e(p,null,{default:o(()=>[e(V,null,{default:o(()=>[w("Wydatki")]),_:1}),e(S,{slot:"start"},{default:o(()=>[e(A,{text:"",icon:"ioniconsArrowBackOutline"in t?t.ioniconsArrowBackOutline:n(we)},null,8,["icon"])]),_:1}),e(S,{slot:"end"},{default:o(()=>[e(i,{type:"tertiary",onClick:M},{default:o(()=>[e(b,{slot:"icon-only",icon:"ioniconsBarChartOutline"in t?t.ioniconsBarChartOutline:n($e)},null,8,["icon"])]),_:1}),e(i,{type:"tertiary",onClick:R},{default:o(()=>[e(b,{slot:"icon-only",icon:"ioniconsFilter"in t?t.ioniconsFilter:n(Ie)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ne,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:o(()=>[n(c)?(l(),$("div",Qe,[e(C,{name:"lines-sharp"})])):!n(c)&&!n(u).length?(l(),$("div",He,[e(h,{filters:y,active:n(r),onClick:E},null,8,["active"]),e(g),Xe])):(l(),$("div",Ze,[e(h,{filters:y,active:n(r),onClick:E},null,8,["active"]),e(g),d("div",Ge,[Je,d("span",null,_(n(D))+" zł",1)]),e(G,{class:"mb-6"}),e(K,{lines:"none",class:"overflow-auto h-[70%]"},{default:o(()=>[(l(!0),$(U,null,q(n(T),F=>(l(),v(J,{key:`${F.name}-${F.id}`,expense:F,onClick:()=>N(F)},null,8,["expense","onClick"]))),128))]),_:1})])),e(ee,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[e(Y,{onClick:P},{default:o(()=>[e(b,{icon:"ioniconsAdd"in t?t.ioniconsAdd:n(Se)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}},tn=j(Ke,[["__scopeId","data-v-c8897a6a"]]);export{tn as default};
