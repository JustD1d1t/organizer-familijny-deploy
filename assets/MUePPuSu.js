import{u as A,ac as I,L as R,b6 as V,r as _,N as T,A as s,Z as B,t as N,z as a,B as p,O as j,a2 as L,x as o,l as $,S as E,V as F,W as M,a4 as U,X as H,Y as O,ae as Z,ad as D}from"./Da8WVVY-.js";import{_ as P}from"./bxLPhKux.js";import{_ as W}from"./pRg_Fr1J.js";const X=o("p",null,"Możesz dodawać przepisy ze stron:",-1),Y=o("ul",{class:"my-2"},[o("li",null,"www.przepisy.pl"),o("li",null,"www.aniagotuje.pl"),o("li",null,"www.kwestiasmaku.com"),o("li",null,"www.kucnialidla.pl"),o("li",null,"www.poprostupycha.com.pl"),o("li",null,"www.aniastarmach.pl"),o("li",null,"www.doradcasmaku.pl")],-1),G=o("span",{class:"text-center block"},"lub",-1),te={__name:"index",props:{cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(J){const m=A(),f=I(),{uid:y}=R(f),{request:w}=Z(),{backendUrl:h}=D(),k=V(),{addRecipe:x}=k;_();const t=_(""),S=async r=>{try{return(await w(`${h}/html?url=${r}`)).data}catch(e){console.error("Error fetching content:",e)}},g=async()=>{const r=await S(t.value),e=document.createElement("html");e.innerHTML=r;let n,l,c=[];t.value.includes("przepisy.pl")?(n=e.querySelector(".title").textContent,l=e.querySelectorAll(".ingredients-list-content-item")):t.value.includes("aniagotuje.pl")?(n=e.querySelector(".article-content h1").textContent,l=e.querySelectorAll(".recipe-ing-list li")):t.value.includes("kwestiasmaku.com")?(n=e.querySelector("h1.przepis").textContent,l=e.querySelectorAll(".field-name-field-skladniki ul li")):t.value.includes("kuchnialidla.pl")?(n=e.querySelector(".lead h1").textContent,l=e.querySelectorAll(".skladniki ul li")):t.value.includes("poprostupycha.com.pl")?(n=e.querySelector("h1.entry-title").textContent,l=e.querySelectorAll(".ingredient")):t.value.includes("aniastarmach.pl")?(n=e.querySelector("h1.recipe-name").textContent,l=e.querySelectorAll(".recipe-what-to-buy ul li")):t.value.includes("doradcasmaku.pl")&&(n=e.querySelector("h1.grid-in-title").textContent,l=e.querySelectorAll(".grid-in-ingredients tbody tr")),l.forEach(u=>{c.push({name:u.textContent})});const i={name:n,ingredients:c,userId:y.value,url:t.value};await x(i),t.value="",m.back()},q=()=>{$("/recipes/new/own")};return(r,e)=>{const n=E,l=F,c=M,i=U,u=P,C=W,d=H,v=O,b=B;return N(),T(b,null,{default:s(()=>[a(c,{style:{background:"var(--ion-color-light)"}},{default:s(()=>[a(l,null,{default:s(()=>[a(n,null,{default:s(()=>[p("Nowy przepis")]),_:1})]),_:1})]),_:1}),a(v,{fullscreen:!0},{default:s(()=>[a(u,null,{default:s(()=>[a(i,{label:"Adres strony",type:"text",modelValue:j(t),"onUpdate:modelValue":e[0]||(e[0]=z=>L(t)?t.value=z:null)},null,8,["modelValue"])]),_:1}),a(C,{class:"mt-8"},{default:s(()=>[X,Y]),_:1}),a(d,{onClick:g,class:"mt-6 mb-3 w-full"},{default:s(()=>[p(" Dodaj przepis ze strony ")]),_:1}),G,a(d,{type:"secondary",onClick:q,class:"my-3 w-full"},{default:s(()=>[p(" Zapisz swój własny przepis ")]),_:1})]),_:1})]),_:1})}}};export{te as default};
