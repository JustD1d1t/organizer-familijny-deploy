import{_ as Q,L as W,M as X,r as u,o as j,N as m,A as l,O as q,a5 as J,t as d,z as s,P as t,B as I,Q as b,v as V,R as ee,S as te,T as ae,U as oe,V as ne,W as le,X as se,Y as ue,Z as re,$ as de,a4 as ie,y as me,a7 as ce,a8 as pe,a9 as _e}from"./BClyMcC6.js";import{_ as ve}from"./CvZxeKqt.js";import{u as be}from"./BeWdyBTf.js";const fe={key:0,class:"inner-content"},ye={__name:"index",setup(we){const{photos:S,photoFromCamera:ge,selectPhotoFromData:Ie}=be(),k=W(),{removeExpenseFromStore:h,editExpense:C,getExpensePhoto:D}=k,{currentExpense:e}=X(k),{billCategories:M}=ce(),{openAlert:N}=pe(),x=q(),r=localStorage.getItem("uid"),f=u(""),B=u(null),T=u(null);u(!1);const y=u(e.value.shop),w=u(e.value.name),g=u(e.value.value),c=u(e.value.timestamp),i=u(e.value.familyMembers),U=()=>{let o;e.value.timestamp.seconds?o=new Date(e.value.timestamp.seconds*1e3):o=new Date(e.value.timestamp);const a=o.getFullYear(),p=String(o.getMonth()+1).padStart(2,"0"),_=String(o.getDate()).padStart(2,"0");c.value=`${a}-${p}-${_}`},E=async()=>{const o={name:w.value,value:Number(g.value),timestamp:new Date(c.value).getTime(),shop:y.value,familyMembers:i.value,userId:e.value.userId,id:e.value.id,category:f.value};await C(o,B.value,T.value),x.back()},P=async()=>{await h(e.value.id),x.back()},z=async()=>{const o=await D(e.value.id);o&&S.value.push({webviewPath:o,document:{title:"New Photo",description:"Photo taken with the app",timestamp:new Date}})};j(async()=>{await z(),U()});const F=o=>{i.value.includes(o.id)?i.value=i.value.filter(a=>a!=o.id):i.value.push(o.id)};return(o,a)=>{const p=ae,_=oe,$=ne,A=le,v=se,L=_e,R=ue,O=re,Y=ve,Z=de,G=ie,H=J;return d(),m(H,null,{default:l(()=>[s(A,{style:{background:"var(--ion-color-light)"}},{default:l(()=>[s($,null,{default:l(()=>[t(e)&&t(e).userId===t(r)?(d(),m(_,{key:0,slot:"start"},{default:l(()=>[s(p,{type:"tertiary",strong:!0,color:"danger",onClick:a[0]||(a[0]=()=>t(N)("Usuwanie wydatku","Czy na pewno chcesz usunąć wydatek?","alert-button-confirm",P))},{default:l(()=>[I("Usuń")]),_:1})]),_:1})):b("",!0),t(e)&&t(e).userId===t(r)?(d(),m(_,{key:1,slot:"end"},{default:l(()=>[s(p,{type:"tertiary",strong:!0,color:"success",onClick:a[1]||(a[1]=n=>E())},{default:l(()=>[I("Zapisz")]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1}),s(G,{fullscreen:!0},{default:l(()=>[t(e)?(d(),V("div",fe,[s(Z,{lines:"none"},{default:l(()=>[s(v,{label:"Nazwa sklepu",type:"text",modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=n=>y.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(v,{label:"Nazwa wydatku",type:"text",modelValue:w.value,"onUpdate:modelValue":a[3]||(a[3]=n=>w.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(v,{label:"Całkowita kwota",type:"number",modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=n=>g.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(v,{label:"Data",type:"date",modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=n=>c.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),s(O,null,{default:l(()=>[s(R,{label:"Kategoria","label-placement":"stacked",modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=n=>f.value=n)},{default:l(()=>[(d(!0),V(ee,null,te(t(M),(n,K)=>(d(),m(L,{key:K,value:n},{default:l(()=>[I(me(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(e).userId===t(r)?(d(),m(Y,{key:0,members:t(e).familyMembers,onToggleMember:F},null,8,["members"])):b("",!0)]),_:1})])):b("",!0)]),_:1})]),_:1})}}},Se=Q(ye,[["__scopeId","data-v-a52ed25a"]]);export{Se as default};
