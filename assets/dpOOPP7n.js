import{aC as E,r as s,N as U,A as a,a1 as B,t as S,z as e,B as _,x as z,P as r,ah as f,l as H,a6 as L,V as P,W as R,ai as A,ae as O,T as Z,a0 as $,ar as J,a3 as W}from"./DSXBFoX7.js";import{_ as q}from"./ToDTd260.js";const D={class:"flex items-center h-full w-full"},M={__name:"index",setup(F){const{backendUrl:g}=J(),y=E(),{registerUser:j}=y,{openToast:v}=W(),n=s(""),t=s(""),u=s(""),i=s(""),c=s(""),m=s(""),V=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(l).toLowerCase()),b=async()=>{if(i.value="",c.value="",m.value="",n.value||(i.value="Email jest wymagany."),V(n.value)||(i.value="Nieprawidłowy format email."),t.value||(c.value="Hasło jest wymagane."),t.value.length<6&&(c.value="Hasło musi mieć co najmniej 6 znaków."),u.value||(m.value="Nazwa jest wymagana."),!(i.value||c.value||m.value))try{const l=await j(n.value,t.value,u.value);if(l.error){v(l.error,"danger");return}const o=l.localId;await fetch(`${g}/users/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{uid:o,email:n.value.toLowerCase()}})}),v("Zarejestrowano pomyślnie"),H("/login")}catch(l){console.log(l)}};return(l,o)=>{const I=L,k=P,x=R,p=A,C=O,w=Z,N=q,T=$,h=B;return S(),U(h,null,{default:a(()=>[e(x,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[e(k,null,{default:a(()=>[e(I,null,{default:a(()=>[_("Rejestracja")]),_:1})]),_:1})]),_:1}),e(T,{fullscreen:!0},{default:a(()=>[z("div",D,[e(N,{class:"p-8 w-full"},{title:a(()=>[_(" Rejestracja ")]),default:a(()=>[e(C,{class:"pb-4"},{default:a(()=>[e(p,{class:"w-full",label:"Email",type:"email",modelValue:r(n),"onUpdate:modelValue":o[0]||(o[0]=d=>f(n)?n.value=d:null),error:r(i)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Hasło",type:"password",modelValue:r(t),"onUpdate:modelValue":o[1]||(o[1]=d=>f(t)?t.value=d:null),error:r(c)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Nazwa",modelValue:r(u),"onUpdate:modelValue":o[2]||(o[2]=d=>f(u)?u.value=d:null),error:r(m)},null,8,["modelValue","error"])]),_:1}),e(w,{class:"w-full mt-4",expand:"block",onClick:b},{default:a(()=>[_("Zarejestruj")]),_:1}),e(w,{class:"w-full mt-4",expand:"block",fill:"outline","router-link":"/login"},{default:a(()=>[_("Logowanie")]),_:1})]),_:1})])]),_:1})]),_:1})}}};export{M as default};
