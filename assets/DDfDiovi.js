import{_ as D,aN as M,M as h,N as q,aP as G,r as H,i as P,o as Q,O as w,A as o,aQ as R,a6 as W,t as u,z as t,Q as v,B as _,aS as k,aT as S,x as d,v as F,T as X,S as Z,aU as J,ae as K,V as Y,a3 as ee,W as oe,X as te,aj as ne,a0 as ae,a5 as se,ag as re,y as ce,C as le,D as pe,aA as ie,l as ue,af as _e,U as de,$ as me}from"./CtmnvVoy.js";import{_ as fe,S as he}from"./bBCHJx55.js";const we=s=>(le("data-v-8a39e45b"),s=s(),pe(),s),ve={class:"w-full flex flex-col justify-center items-center h-full"},ke=we(()=>d("span",null,"Å‚adowanie gazetek",-1)),Se={__name:"index",setup(s){const{backendUrl:I}=ie(),b=M(),{shops:g}=h(b),x=q(),{idToken:y}=h(x);fe.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.min.mjs";const m=R().params.shop,r=G(he.Newspapers,()=>[]),n=H(!1),B=P(()=>g.value[m]),T=async()=>{try{const e=y.value;return n.value=!0,(await J.get(`${I}/html`,{params:{url:B.value.url},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.data}catch(e){n.value=!1,console.error("Error fetching shops:",e)}},N=async()=>{r.value=[];const e=await T(),a=document.createElement("html");a.innerHTML=e;const c=a.querySelectorAll(".newspapper-footer p"),l=a.querySelectorAll(".newspapper-nav-item.newspapper-nav-download");c.forEach((p,i)=>{r.value.push({title:p.textContent,url:l[i].href})}),n.value=!1},C=e=>{ue(`/newspaper/${m}/${e}`)};return Q(()=>{N()}),(e,a)=>{const c=K,l=Y,p=ee,i=oe,j=te,A=ne,$=_e,z=de,E=me,L=ae,O=se,U=W;return u(),w(U,null,{default:o(()=>[t(j,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[t(i,null,{default:o(()=>[t(l,{slot:"start"},{default:o(()=>[t(c,{text:"",icon:"ioniconsArrowBackOutline"in e?e.ioniconsArrowBackOutline:v(re)},null,8,["icon"])]),_:1}),t(p,null,{default:o(()=>[_("Gazetki")]),_:1})]),_:1})]),_:1}),t(O,null,{default:o(()=>[k(d("div",ve,[t(A,{name:"lines-sharp"}),ke],512),[[S,n.value]]),k(d("div",null,[t(L,null,{default:o(()=>[(u(!0),F(Z,null,X(v(r),(f,V)=>(u(),w(E,{key:f.title},{default:o(()=>[t($,null,{default:o(()=>[_(ce(f.title),1)]),_:2},1024),t(z,{type:"tertiary",onClick:ge=>C(V)},{default:o(()=>[_(" Zobacz ")]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})],512),[[S,!n.value]])]),_:1})]),_:1})}}},Be=D(Se,[["__scopeId","data-v-8a39e45b"]]);export{Be as default};
