import{_ as L,t as s,N as v,A as o,B as k,y as d,ag as ne,T as R,v as x,R as U,S as q,L as Q,M as H,i as I,z as e,P as t,ah as O,Q as $,a0 as X,ai as oe,d as se,x as u,Z as ae,r as le,a5 as ie,l as A,aj as ce,a2 as re,ad as ue,U as de,V as pe,W as _e,ak as me,al as fe,$ as ve,am as ye,an as xe,a4 as be,af as he,ao as ke,ap as Ce,a6 as ge,C as we,D as $e}from"./DRa_VBAG.js";import{u as Ie}from"./CJDFcTX3.js";const Se={__name:"filter-tab",props:{filter:{type:Object,required:!0},active:{type:String,required:!0}},emits:["click"],setup(i,{emit:m}){const a=m;return(b,f)=>{const p=R;return s(),v(p,{onClick:f[0]||(f[0]=l=>a("click",i.filter)),class:ne(["text-xl",{active:i.active===i.filter.value}]),size:"small",type:"tertiary"},{default:o(()=>[k(d(i.filter.label),1)]),_:1},8,["class"])}}},Be=L(Se,[["__scopeId","data-v-1100ad1c"]]),Oe={class:"flex justify-between w-full mb-4"},Ne={__name:"filter-tabs",props:{filters:{type:Array,default:()=>[]},active:{type:String,default:"Wszystkie"}},emits:["click"],setup(i,{emit:m}){const a=m;return(b,f)=>{const p=Be;return s(),x("div",Oe,[(s(!0),x(U,null,q(i.filters,l=>(s(),v(p,{key:l,filter:l,active:i.active,onClick:r=>a("click",l)},null,8,["filter","active","onClick"]))),128))])}}},Ee={class:"flex overflow-auto gap-2 w-full"},ze={__name:"filter-pills",props:{filters:{type:Array,default:()=>[]}},setup(i){const m=Q(),{selectedPeriod:a,startDate:b,endDate:f,shopName:p,expenseName:l,startPrice:r,endPrice:h,category:N}=H(m),{queryExpenses:P,updatePeriod:D,updateEndDate:E,updateStartDate:W,updateStartPrice:T,updateEndPrice:M,updateShopName:n,updateExpenseName:z,updateCategory:V}=m,j=I(()=>a.value.label?a.value.label:b.value&&f.value?`${b.value} - ${f.value}`:""),B=I(()=>r.value&&h.value?`${r.value} - ${h.value}`:r.value?`od ${r.value}`:h.value?`do ${h.value}`:""),y=async c=>{switch(c){case"shopName":n("");break;case"expenseName":z("");break;case"category":V("");break;case"priceRange":T(null),M(null);break;case"selectedPeriod":D({value:"month",label:"Bieżący miesiąc"});break}await P()};return(c,_)=>{const C=X,g=R,w=oe;return s(),x("div",Ee,[e(w,null,{default:o(()=>[k(d(t(j))+" ",1),t(a).value!=="month"?(s(),v(g,{key:0,type:"tertiary",size:"small",onClick:_[0]||(_[0]=S=>y("selectedPeriod"))},{default:o(()=>[e(C,{icon:"ioniconsCloseOutline"in c?c.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})):$("",!0)]),_:1}),t(p)?(s(),v(w,{key:0},{default:o(()=>[k(d(t(p))+" ",1),e(g,{type:"tertiary",size:"small",onClick:_[1]||(_[1]=S=>y("shopName"))},{default:o(()=>[e(C,{icon:"ioniconsCloseOutline"in c?c.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):$("",!0),t(N)?(s(),v(w,{key:1},{default:o(()=>[k(d(t(N))+" ",1),e(g,{type:"tertiary",size:"small",onClick:_[2]||(_[2]=S=>y("category"))},{default:o(()=>[e(C,{icon:"ioniconsCloseOutline"in c?c.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):$("",!0),t(l)?(s(),v(w,{key:2},{default:o(()=>[k(d(t(l))+" ",1),e(g,{type:"tertiary",size:"small",onClick:_[3]||(_[3]=S=>y("expenseName"))},{default:o(()=>[e(C,{icon:"ioniconsCloseOutline"in c?c.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):$("",!0),t(B)?(s(),v(w,{key:3},{default:o(()=>[k(d(t(B))+" ",1),e(g,{type:"tertiary",size:"small",onClick:_[4]||(_[4]=S=>y("priceRange"))},{default:o(()=>[e(C,{icon:"ioniconsCloseOutline"in c?c.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):$("",!0)])}}},Fe=L(ze,[["__scopeId","data-v-db18ab94"]]),Pe={class:"flex h-full w-full justify-between items-start"},De={class:"flex flex-col"},Te={class:"flex-flex-col"},Me={class:"text-base expense-shop"},Ve={key:0},je={key:1},Ae={class:"text-lg font-bold expense-date"},Le={class:"flex items-end font-bold"},Re={class:"flex items-start"},We={class:"text-3xl price-big"},Ue={class:"text-sm price-small"},qe=se({__name:"item",props:{expense:{}},emits:["openEditExpense","removeExpense"],setup(i,{emit:m}){const a=i,b=I(()=>parseInt(a.expense.value)),f=I(()=>(Number(a.expense.value)-Math.floor(Number(a.expense.value))).toFixed(2).toString().slice(2)),p=I(()=>a.expense.timestamp.seconds?new Date(a.expense.timestamp.seconds*1e3).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}):new Date(a.expense.timestamp).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}));return(l,r)=>{const h=ae;return s(),v(h,{class:"flex flex-col py-2 pl-6 pr-2 bg-white rounded-2xl shadow-lg"},{default:o(()=>[u("div",Pe,[u("div",De,[u("div",Te,[u("p",Me,[k(d(l.expense.shop)+" ",1),l.expense.name?(s(),x("span",Ve,"- "+d(l.expense.name),1)):$("",!0),l.expense.category?(s(),x("span",je," - "+d(l.expense.category.toLowerCase()),1)):$("",!0)])]),u("p",Ae,d(t(p)),1)]),u("div",Le,[u("p",Re,[u("span",We,d(t(b)),1),u("span",Ue,d(t(f)),1)])])])]),_:1})}}}),Qe=i=>(we("data-v-d0058a2f"),i=i(),$e(),i),He={key:0,class:"w-full flex justify-center items-center h-full"},Xe={key:1},Ze={key:2,class:"h-full overflow-auto"},Ge={class:"text-2xl my-4 flex justify-between font-bold"},Je=Qe(()=>u("span",null,"Razem ",-1)),Ke={__name:"index",setup(i){const m=localStorage.getItem("uid"),a=Q(),{queryExpenses:b,setCurrentExpense:f}=a,{expenses:p,isLoading:l}=H(a),r=le("all"),h=[{value:"all",label:"Wszystkie"},{value:"my",label:"Moje"},{value:"common",label:"Wspólne"}];Ie(async()=>{await b()},"$biXQIOSgVL");const N=n=>{f(n),A(`/expenses/${n.id}`)},P=()=>{A("/expenses/new")},D=I(()=>parseFloat(E.value.reduce((n,z)=>Number(n)+Number(z.value),0)).toFixed(2)),E=I(()=>r.value==="all"?p.value:r.value==="my"?p.value.filter(n=>n.userId===m&&n.familyMembers.length===0):p.value.filter(n=>n.userId===m&&n.familyMembers.length>0||n.familyMembers.includes(m))),W=async()=>{await ce.open("expense-filter")},T=n=>{n.label==="Wszystkie"?r.value="all":n.label==="Moje"?r.value="my":r.value="common"},M=()=>{A("/expenses/charts")};return(n,z)=>{const V=re,j=ue,B=de,y=X,c=R,_=pe,C=_e,g=Ne,w=Fe,S=me,Z=fe,G=qe,J=ve,K=ye,Y=xe,ee=be,te=ie;return s(),v(te,null,{default:o(()=>[e(C,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[e(_,null,{default:o(()=>[e(V,null,{default:o(()=>[k("Wydatki")]),_:1}),e(B,{slot:"start"},{default:o(()=>[e(j,{text:"",icon:"ioniconsArrowBackOutline"in n?n.ioniconsArrowBackOutline:t(he)},null,8,["icon"])]),_:1}),e(B,{slot:"end"},{default:o(()=>[e(c,{type:"tertiary",onClick:M},{default:o(()=>[e(y,{slot:"icon-only",icon:"ioniconsBarChartOutline"in n?n.ioniconsBarChartOutline:t(ke)},null,8,["icon"])]),_:1}),e(c,{type:"tertiary",onClick:W},{default:o(()=>[e(y,{slot:"icon-only",icon:"ioniconsFilter"in n?n.ioniconsFilter:t(Ce)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:o(()=>[u("div",null,[e(g,{filters:h,active:t(r),onClick:T},null,8,["active"]),e(w)]),t(l)?(s(),x("div",He,[e(S,{name:"lines-sharp"})])):!t(l)&&!t(E).length?(s(),x("h2",Xe,"Brak wydatków")):(s(),x("div",Ze,[u("div",Ge,[Je,u("span",null,d(t(D))+" zł",1)]),e(Z,{class:"mb-6"}),e(J,{lines:"none",class:"overflow-auto h-[70%]"},{default:o(()=>[(s(!0),x(U,null,q(t(E),F=>(s(),v(G,{key:`${F.name}-${F.id}`,expense:F,onClick:()=>N(F)},null,8,["expense","onClick"]))),128))]),_:1})])),e(Y,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[e(K,{onClick:P},{default:o(()=>[e(y,{icon:"ioniconsAdd"in n?n.ioniconsAdd:t(ge)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}},tt=L(Ke,[["__scopeId","data-v-d0058a2f"]]);export{tt as default};
