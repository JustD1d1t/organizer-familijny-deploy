import{_ as L,aO as V,L as b,ac as R,aQ as U,r as G,i as H,o as M,N as Q,A as s,aR as W,aV as x,Z,t as h,z as o,O as B,B as w,aT as I,aU as T,x as n,v as A,Q as F,R as P,ad as X,T as Y,U as J,S as K,V as ee,W as te,ao as oe,Y as se,$ as ae,y as ne,C as re,D as ce,l as le,al as ie,X as pe}from"./BtlW2p2z.js";import{_ as ue,S as _e}from"./CBSqUdV3.js";const de=l=>(re("data-v-aaf9fb27"),l=l(),ce(),l),me={class:"w-full flex flex-col justify-center items-center h-full"},fe=de(()=>n("span",null,"Å‚adowanie gazetek",-1)),he={class:"flex flex-wrap gap-1 items-between justify-between"},we={class:"flex items-center h-[320px]"},ve=["src"],ge={__name:"index",setup(l){const{backendUrl:v}=X(),j=V(),{shops:C}=b(j),N=R(),{idToken:g}=b(N);ue.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.min.mjs";const k=W().params.shop,p=U(_e.Newspapers,()=>[]),r=G(!1),$=H(()=>C.value[k]),z=async()=>{try{const t=g.value;return r.value=!0,(await x.get(`${v}/html`,{params:{url:$.value.url},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data}catch(t){r.value=!1,console.error("Error fetching shops:",t)}},O=async()=>{p.value=[];const t=await z(),a=document.createElement("html");a.innerHTML=t;const u=a.querySelectorAll(".newspapper-footer p"),_=a.querySelectorAll(".newspapper-footer button"),d=Array.from(_).map(e=>e.getAttribute("rel").replace("#","")).map(e=>a.querySelector(`#${e}`)).map(e=>e.querySelector("iframe")),m=g.value,i=[];for(const e of d)if(e){const c=await x.get(`${v}/html/imgs`,{params:{url:e.dataset.src},headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});i.push(c.data.imgs)}a.querySelectorAll(".newspapper-nav-item.newspapper-nav-download"),u.forEach((e,c)=>{p.value.push({title:e.textContent,imgs:i[c]})}),r.value=!1},q=t=>{le(`/newspaper/${k}/${t}`)};return M(async()=>{O()}),(t,a)=>{const u=Y,_=J,y=K,S=ee,d=te,m=oe,i=ie,e=pe,c=se,D=Z;return h(),Q(D,null,{default:s(()=>[o(d,{style:{background:"var(--ion-color-light)"}},{default:s(()=>[o(S,null,{default:s(()=>[o(_,{slot:"start"},{default:s(()=>[o(u,{text:"",icon:"ioniconsArrowBackOutline"in t?t.ioniconsArrowBackOutline:B(ae)},null,8,["icon"])]),_:1}),o(y,null,{default:s(()=>[w("Gazetki")]),_:1})]),_:1})]),_:1}),o(c,null,{default:s(()=>[I(n("div",me,[o(m,{name:"lines-sharp"}),fe],512),[[T,r.value]]),I(n("div",null,[n("div",he,[(h(!0),A(P,null,F(B(p),(f,E)=>(h(),A("div",{key:f.title,class:"w-[49%] flex flex-col"},[n("div",we,[n("img",{src:"https://www.gazetkipromocyjne.net"+f.imgs[0],class:"w-full"},null,8,ve)]),o(i,null,{default:s(()=>[w(ne(f.title),1)]),_:2},1024),o(e,{type:"tertiary",onClick:Se=>q(E)},{default:s(()=>[w(" Zobacz ")]),_:2},1032,["onClick"])]))),128))])],512),[[T,!r.value]])]),_:1})]),_:1})}}},Be=L(ge,[["__scopeId","data-v-aaf9fb27"]]);export{Be as default};
