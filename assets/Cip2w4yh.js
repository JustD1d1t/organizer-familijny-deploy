import{_ as R,aO as D,L as h,ac as q,aQ as G,r as H,i as M,o as Q,N as w,A as o,aR as W,Z,t as u,z as t,O as v,B as _,aT as k,aU as S,x as d,v as F,Q as P,R as X,aV as Y,T as J,U as K,S as ee,V as oe,W as te,ao as ne,ag as ae,Y as se,$ as re,y as ce,C as le,D as pe,ad as ie,l as ue,al as _e,X as de,a1 as me}from"./CGaVrOoi.js";import{_ as fe,S as he}from"./ucUINqe9.js";const we=s=>(le("data-v-8a39e45b"),s=s(),pe(),s),ve={class:"w-full flex flex-col justify-center items-center h-full"},ke=we(()=>d("span",null,"Å‚adowanie gazetek",-1)),Se={__name:"index",setup(s){const{backendUrl:I}=ie(),b=D(),{shops:g}=h(b),x=q(),{idToken:y}=h(x);fe.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.min.mjs";const m=W().params.shop,r=G(he.Newspapers,()=>[]),n=H(!1),B=M(()=>g.value[m]),T=async()=>{try{const e=y.value;return n.value=!0,(await Y.get(`${I}/html`,{params:{url:B.value.url},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.data}catch(e){n.value=!1,console.error("Error fetching shops:",e)}},N=async()=>{r.value=[];const e=await T(),a=document.createElement("html");a.innerHTML=e;const c=a.querySelectorAll(".newspapper-footer p"),l=a.querySelectorAll(".newspapper-nav-item.newspapper-nav-download");c.forEach((p,i)=>{r.value.push({title:p.textContent,url:l[i].href})}),n.value=!1},C=e=>{ue(`/newspaper/${m}/${e}`)};return Q(()=>{N()}),(e,a)=>{const c=J,l=K,p=ee,i=oe,j=te,A=ne,L=_e,O=de,$=me,z=ae,E=se,U=Z;return u(),w(U,null,{default:o(()=>[t(j,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[t(i,null,{default:o(()=>[t(l,{slot:"start"},{default:o(()=>[t(c,{text:"",icon:"ioniconsArrowBackOutline"in e?e.ioniconsArrowBackOutline:v(re)},null,8,["icon"])]),_:1}),t(p,null,{default:o(()=>[_("Gazetki")]),_:1})]),_:1})]),_:1}),t(E,null,{default:o(()=>[k(d("div",ve,[t(A,{name:"lines-sharp"}),ke],512),[[S,n.value]]),k(d("div",null,[t(z,null,{default:o(()=>[(u(!0),F(X,null,P(v(r),(f,V)=>(u(),w($,{key:f.title},{default:o(()=>[t(L,null,{default:o(()=>[_(ce(f.title),1)]),_:2},1024),t(O,{type:"tertiary",onClick:ge=>C(V)},{default:o(()=>[_(" Zobacz ")]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})],512),[[S,!n.value]])]),_:1})]),_:1})}}},Be=R(Se,[["__scopeId","data-v-8a39e45b"]]);export{Be as default};
