import{ac as O,r,N as S,A as o,Z as h,t as z,z as e,O as l,B as d,x as A,a2 as f,l as H,T as L,U as $,S as R,V as Z,W as P,a4 as J,X as W,Y as X,$ as Y,ad as q,ai as D}from"./BST2lCDv.js";import{_ as F}from"./C_Omqr5n.js";import{_ as G}from"./BB3zPaRv.js";const K={class:"flex items-center h-full w-full"},ae={__name:"index",setup(M){const{backendUrl:g}=q(),y=O(),{registerUser:k}=y,{openToast:w}=D(),t=r(""),s=r(""),u=r(""),i=r(""),c=r(""),m=r(""),j=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(a).toLowerCase()),V=async()=>{if(i.value="",c.value="",m.value="",t.value||(i.value="Email jest wymagany."),j(t.value)||(i.value="Nieprawidłowy format email."),s.value||(c.value="Hasło jest wymagane."),s.value.length<6&&(c.value="Hasło musi mieć co najmniej 6 znaków."),u.value||(m.value="Nazwa jest wymagana."),!(i.value||c.value||m.value))try{const a=await k(t.value,s.value,u.value);if(a.error){w(a.error,"danger");return}const n=a.localId;await fetch(`${g}/users/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{uid:n,email:t.value.toLowerCase()}})}),w("Zarejestrowano pomyślnie"),H("/login")}catch(a){console.log(a)}};return(a,n)=>{const b=L,I=$,B=R,x=Z,C=P,p=J,N=F,v=W,T=G,U=X,E=h;return z(),S(E,null,{default:o(()=>[e(C,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[e(x,null,{default:o(()=>[e(I,{slot:"start"},{default:o(()=>[e(b,{text:"",icon:"ioniconsArrowBackOutline"in a?a.ioniconsArrowBackOutline:l(Y)},null,8,["icon"])]),_:1}),e(B,null,{default:o(()=>[d("Rejestracja")]),_:1})]),_:1})]),_:1}),e(U,{fullscreen:!0},{default:o(()=>[A("div",K,[e(T,{class:"p-8 w-full"},{title:o(()=>[d(" Rejestracja ")]),default:o(()=>[e(N,{class:"pb-4"},{default:o(()=>[e(p,{class:"w-full",label:"Email",type:"email",modelValue:l(t),"onUpdate:modelValue":n[0]||(n[0]=_=>f(t)?t.value=_:null),error:l(i)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Hasło",type:"password",modelValue:l(s),"onUpdate:modelValue":n[1]||(n[1]=_=>f(s)?s.value=_:null),error:l(c)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Nazwa",modelValue:l(u),"onUpdate:modelValue":n[2]||(n[2]=_=>f(u)?u.value=_:null),error:l(m)},null,8,["modelValue","error"])]),_:1}),e(v,{class:"w-full mt-4",onClick:V},{default:o(()=>[d("Zarejestruj")]),_:1}),e(v,{class:"w-full mt-4",fill:"outline","router-link":"/login",type:"secondary"},{default:o(()=>[d("Logowanie")]),_:1})]),_:1})])]),_:1})]),_:1})}}};export{ae as default};
