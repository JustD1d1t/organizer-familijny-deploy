import{am as A,aA as M,an as Z,r as m,N as $,A as a,a1 as z,t as F,z as o,B as c,x as P,P as l,ah as v,l as _,a6 as R,V as h,W as D,ae as O,T as W,aB as q,a0 as G,a3 as J}from"./DO8NUlkj.js";import{_ as K}from"./Br17pZBJ.js";import{_ as Q}from"./D8QkYBEK.js";const X={class:"flex items-center h-full w-full"},ne={__name:"index",setup(Y){const w=A(),{getNotifications:T}=w,{openToast:f}=J(),y=M(),{loginUser:b}=y,I=Z(),{getFamilyDetails:V}=I,t=m(""),s=m("");m("");const k=()=>{f("Zalogowano pomyślnie")},d=e=>{f(e,"danger")},j=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()),r=m(""),i=m(""),C=async()=>{if(r.value="",i.value="",t.value||(r.value="Email jest wymagany."),j(t.value)||(r.value="Nieprawidłowy format email."),s.value||(i.value="Hasło jest wymagane."),s.value.length<6&&(i.value="Hasło musi mieć co najmniej 6 znaków."),!(r.value||i.value))try{const e=await b(t.value,s.value);e.error?d(e.error):(_("/"),await T(),await V(),k())}catch(e){d(e)}};return(e,n)=>{const N=R,S=h,x=D,g=K,B=O,p=W,L=Q,E=q,H=G,U=z;return F(),$(U,null,{default:a(()=>[o(x,null,{default:a(()=>[o(S,null,{default:a(()=>[o(N,null,{default:a(()=>[c("Logowanie")]),_:1})]),_:1})]),_:1}),o(H,{fullscreen:!0},{default:a(()=>[P("div",X,[o(L,{class:"p-8 w-full"},{title:a(()=>[c(" Logowanie ")]),default:a(()=>[o(B,{class:"pb-4"},{default:a(()=>[o(g,{label:"Email",type:"email",modelValue:l(t),"onUpdate:modelValue":n[0]||(n[0]=u=>v(t)?t.value=u:null),error:l(r)},null,8,["modelValue","error"]),o(g,{label:"Hasło",type:"password",modelValue:l(s),"onUpdate:modelValue":n[1]||(n[1]=u=>v(s)?s.value=u:null),error:l(i)},null,8,["modelValue","error"])]),_:1}),o(p,{class:"w-full mt-4",expand:"block",onClick:C},{default:a(()=>[c("Zaloguj")]),_:1}),o(p,{class:"w-full mt-4",expand:"block",fill:"outline",onClick:n[2]||(n[2]=u=>("navigateTo"in e?e.navigateTo:l(_))("/register"))},{default:a(()=>[c("Rejestracja")]),_:1}),o(p,{class:"w-full mt-4",expand:"block",fill:"clear",onClick:n[3]||(n[3]=u=>("navigateTo"in e?e.navigateTo:l(_))("/reset-password"))},{default:a(()=>[c("Zapomniałem hasła")]),_:1})]),_:1})]),o(E,{"is-open":e.isOpen,message:e.toastMessage,duration:2e3},null,8,["is-open","message"])]),_:1})]),_:1})}}};export{ne as default};
