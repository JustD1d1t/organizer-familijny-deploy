import{_ as j,t as n,O as i,A as e,v as I,S as v,T as R,B as y,y as d,aC as V,M as O,r as T,o as N,z as t,Q as o,x as _,R as B,X as C,b3 as F,ay as G,$ as D,a0 as H,b4 as Q,G as U,i as W,aQ as q,a6 as E,ae as X,V as J,a3 as K,W as Y,a1 as Z,U as ee,a2 as ne,a5 as te,ag as oe,b5 as se}from"./CtmnvVoy.js";import{_ as ae}from"./DXx0u4sX.js";import{_ as ce}from"./o7ityAlN.js";const ie={__name:"ingredients-list",props:{ingredients:{type:Array,required:!0,default:()=>[]}},setup(m){return(x,L)=>{const a=ae,f=ce;return n(),i(f,{inset:!0,lines:!0,class:"p-2","bg-white":!0},{default:e(()=>[(n(!0),I(v,null,R(m.ingredients,l=>(n(),i(a,{key:l.id},{start:e(()=>[y(d(l.name),1)]),_:2},1024))),128))]),_:1})}}},le=j(ie,[["__scopeId","data-v-73e57f11"]]),re={key:0,class:"inner-content py-2"},_e={class:"line-through"},ue=_("span",null," dodane",-1),pe={class:"line-through"},de=_("span",null," dodane",-1),me={__name:"add-recipe-to-shopping-list-modal",props:{recipe:{type:Object,default:()=>{}},cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(m){const x=V(),{updateShoppingList:L,getAllShoppingLists:a}=x,{shoppingLists:f,collaboratedShoppingLists:l}=O(x),h=m,w=T(!1),c=T(""),g=async u=>{const r=u.recipes;if(w.value=!0,r.find(p=>p.name===h.recipe.name)){const p=r.findIndex(b=>b.name===h.recipe.name);c.value=`Przepis "${h.recipe.name}" został usunięty z listy "${u.name}"`,r.splice(p,1)}else c.value=`Przepis "${h.recipe.name}" został dodany do listy "${u.name}"`,r.push(h.recipe);setTimeout(()=>{w.value=!1},2e3),await L({...u,recipes:r}),u.recipes=r};return N(async()=>{await a()}),(u,r)=>{const p=C,b=F,k=G,$=D,S=H;return m.recipe?(n(),I("div",re,[t(p,{class:"text-lg text-center"},{default:e(()=>[y("Wybierz listę do której chcesz dodać przepis")]),_:1}),t(S,{inset:!0,lines:"inset"},{default:e(()=>[t(b,null,{default:e(()=>[y(" Twoje listy ")]),_:1}),(n(!0),I(v,null,R(o(f),s=>(n(),i($,{onClick:()=>g(s),key:s.id},{default:e(()=>[s.recipes.find(z=>z.name===m.recipe.name)?(n(),i(k,{key:1},{default:e(()=>[_("span",_e,d(s.name),1),ue]),_:2},1024)):(n(),i(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1}),o(l)&&o(l).length?(n(),i(p,{key:0,class:"text-lg"},{default:e(()=>[y("Listy do których zostałeś zaproszony")]),_:1})):B("",!0),t(S,{inset:!0,lines:"inset"},{default:e(()=>[(n(!0),I(v,null,R(o(l),s=>(n(),i($,{onClick:()=>g(s),key:s.id},{default:e(()=>[s.recipes.find(z=>z.name===m.recipe.name)?(n(),i(k,{key:1},{default:e(()=>[_("span",pe,d(s.name),1),de]),_:2},1024)):(n(),i(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1})])):B("",!0)}}},fe=["href"],he=_("h3",null,"Składniki",-1),ge={key:0},ye={key:1},be={__name:"index",setup(m){const x=q(),L=Q(),{currentRecipe:a}=O(L),f=T(),l=()=>f.value.$el.dismiss(null,"cancel"),h=()=>f.value.$el.dismiss(null,"confirm");U(x,async(c,g)=>{l()});const w=W(()=>{const c=/(https?:\/\/)?(www\.)?[\w\-]+\.(com|com\.pl|pl)/,g=a.value.url.match(c);return g?g[0]:null});return(c,g)=>{const u=X,r=J,p=K,b=Y,k=C,$=Z,S=le,s=ee,z=me,M=ne,A=te,P=E;return n(),i(P,null,{default:e(()=>[t(k,{style:{background:"var(--ion-color-light)"}},{default:e(()=>[t(b,null,{default:e(()=>[t(r,{slot:"start"},{default:e(()=>[t(u,{text:"",icon:"ioniconsArrowBackOutline"in c?c.ioniconsArrowBackOutline:o(oe)},null,8,["icon"])]),_:1}),t(p,null,{default:e(()=>[y("Przepisy")]),_:1})]),_:1})]),_:1}),t(A,null,{default:e(()=>[_("h2",null,d(o(a).name),1),_("a",{href:o(a).url,class:"flex items-center"},[t($,{size:"small",icon:"ioniconsGlobeOutline"in c?c.ioniconsGlobeOutline:o(se),class:"mr-1"},null,8,["icon"]),y(" "+d(o(w)),1)],8,fe),he,t(S,{ingredients:o(a).ingredients},null,8,["ingredients"]),o(a).steps?(n(),I("h3",ge,"Przepis")):B("",!0),o(a).steps?(n(),I("p",ye,d(o(a).steps),1)):B("",!0),t(s,{class:"mt-8",id:"open-recipe-to-shopping-list-modal"},{default:e(()=>[y(" Dodaj do listy zakupowej ")]),_:1}),t(M,{class:"auto-height",ref_key:"modal",ref:f,trigger:"open-recipe-to-shopping-list-modal"},{default:e(()=>[t(z,{cancel:l,"confirm-modal":h,recipe:o(a)},null,8,["recipe"])]),_:1},512)]),_:1})]),_:1})}}};export{be as default};
