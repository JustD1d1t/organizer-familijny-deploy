import{_ as O,aN as U,L as b,ac as V,aP as R,r as G,i as H,o as M,N as P,A as s,aQ as Q,aU as x,Z as W,t as h,z as o,O as y,B,aS as I,aT as T,x as n,v as A,Q as Z,R as F,ad as X,T as Y,U as J,S as K,V as ee,W as te,ao as oe,Y as se,$ as ae,y as ne,C as re,D as ce,l as le,al as ie,X as pe}from"./CJWsRK-Q.js";import{_ as ue,S as _e}from"./1KoMdy0z.js";const de=l=>(re("data-v-4be790d2"),l=l(),ce(),l),me={class:"w-full flex flex-col justify-center items-center h-full"},fe=de(()=>n("span",null,"Å‚adowanie gazetek",-1)),he={class:"flex flex-wrap gap-1 items-between justify-between"},we={class:"flex items-center h-[320px]"},ve=["src"],ge={__name:"index",setup(l){const{backendUrl:w}=X(),N=U(),{shops:j}=b(N),C=V(),{idToken:v}=b(C);ue.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.min.mjs";const g=Q().params.shop,p=R(_e.Newspapers,()=>[]),r=G(!1),$=H(()=>j.value[g]),z=async()=>{try{const t=v.value;return r.value=!0,(await x.get(`${w}/html`,{params:{url:$.value.url},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data}catch(t){r.value=!1,console.error("Error fetching shops:",t)}},q=async()=>{p.value=[];const t=await z(),a=document.createElement("html");a.innerHTML=t;const u=a.querySelectorAll(".newspapper-footer p"),_=a.querySelectorAll(".newspapper-footer button"),d=Array.from(_).map(e=>e.getAttribute("rel").replace("#","")).map(e=>a.querySelector(`#${e}`)).map(e=>e.querySelector("iframe")),m=v.value,i=[];for(const e of d)if(e){const c=await x.get(`${w}/html/imgs`,{params:{url:e.dataset.src},headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});i.push(c.data.imgs)}a.querySelectorAll(".newspapper-nav-item.newspapper-nav-download"),u.forEach((e,c)=>{p.value.push({title:e.textContent,imgs:i[c]})}),r.value=!1},D=t=>{le(`/newspaper/${g}/${t}`)};return M(async()=>{q()}),(t,a)=>{const u=Y,_=J,k=K,S=ee,d=te,m=oe,i=ie,e=pe,c=se,E=W;return h(),P(E,null,{default:s(()=>[o(d,{style:{background:"var(--ion-color-light)"}},{default:s(()=>[o(S,null,{default:s(()=>[o(_,{slot:"start"},{default:s(()=>[o(u,{text:"",icon:"ioniconsArrowBackOutline"in t?t.ioniconsArrowBackOutline:y(ae)},null,8,["icon"])]),_:1}),o(k,null,{default:s(()=>[B("Gazetki")]),_:1})]),_:1})]),_:1}),o(c,null,{default:s(()=>[I(n("div",me,[o(m,{name:"lines-sharp"}),fe],512),[[T,r.value]]),I(n("div",null,[n("div",he,[(h(!0),A(F,null,Z(y(p),(f,L)=>(h(),A("div",{key:f.title,class:"w-[49%] flex flex-col mb-2"},[n("div",we,[n("img",{src:"https://www.gazetkipromocyjne.net"+f.imgs[0],class:"w-full h-full"},null,8,ve)]),o(i,{class:"text-center"},{default:s(()=>[n("small",null,ne(f.title),1)]),_:2},1024),o(e,{type:"tertiary",onClick:be=>D(L)},{default:s(()=>[B(" Zobacz ")]),_:2},1032,["onClick"])]))),128))])],512),[[T,!r.value]])]),_:1})]),_:1})}}},Be=O(ge,[["__scopeId","data-v-4be790d2"]]);export{Be as default};
