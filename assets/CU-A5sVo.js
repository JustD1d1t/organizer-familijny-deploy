import{_ as N,t as n,N as i,A as e,v as I,R,S as v,B as g,y as d,$ as O,at as V,M as C,r as T,o as F,z as t,P as o,x as _,Q as B,W as M,aQ as G,ap as D,Z as E,aR as H,G as Q,i as U,aE as W,a2 as q,a8 as Z,U as J,a7 as K,V as X,aa as Y,T as ee,a0 as ne,a1 as te}from"./USmwVBIr.js";import{_ as oe}from"./DF8mllQx.js";import{a as se,j as ae}from"./CHVAF33P.js";const ce={__name:"ingredients-list",props:{ingredients:{type:Array,required:!0,default:()=>[]}},setup(m){return(x,w)=>{const a=oe,f=O;return n(),i(f,{inset:!0,class:"p-2"},{default:e(()=>[(n(!0),I(R,null,v(m.ingredients,l=>(n(),i(a,{key:l.id},{start:e(()=>[g(d(l.name),1)]),_:2},1024))),128))]),_:1})}}},ie=N(ce,[["__scopeId","data-v-84724c73"]]),le={key:0,class:"inner-content py-2"},re={class:"line-through"},_e=_("span",null," dodane",-1),pe={class:"line-through"},ue=_("span",null," dodane",-1),de={__name:"add-recipe-to-shopping-list-modal",props:{recipe:{type:Object,default:()=>{}},cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(m){const x=V(),{updateShoppingList:w,getAllShoppingLists:a}=x,{shoppingLists:f,collaboratedShoppingLists:l}=C(x),h=m,$=T(!1),c=T(""),y=async p=>{const r=p.recipes;if($.value=!0,r.find(u=>u.name===h.recipe.name)){const u=r.findIndex(z=>z.name===h.recipe.name);c.value=`Przepis "${h.recipe.name}" został usunięty z listy "${p.name}"`,r.splice(u,1)}else c.value=`Przepis "${h.recipe.name}" został dodany do listy "${p.name}"`,r.push(h.recipe);setTimeout(()=>{$.value=!1},2e3),await w({...p,recipes:r}),p.recipes=r};return F(async()=>{await a()}),(p,r)=>{const u=M,z=G,k=D,S=E,b=O;return m.recipe?(n(),I("div",le,[t(u,{class:"text-lg text-center"},{default:e(()=>[g("Wybierz listę do której chcesz dodać przepis")]),_:1}),t(b,{inset:!0,lines:"inset"},{default:e(()=>[t(z,null,{default:e(()=>[g(" Twoje listy ")]),_:1}),(n(!0),I(R,null,v(o(f),s=>(n(),i(S,{onClick:()=>y(s),key:s.id},{default:e(()=>[s.recipes.find(L=>L.name===m.recipe.name)?(n(),i(k,{key:1},{default:e(()=>[_("span",re,d(s.name),1),_e]),_:2},1024)):(n(),i(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1}),o(l)&&o(l).length?(n(),i(u,{key:0,class:"text-lg"},{default:e(()=>[g("Listy do których zostałeś zaproszony")]),_:1})):B("",!0),t(b,{inset:!0,lines:"inset"},{default:e(()=>[(n(!0),I(R,null,v(o(l),s=>(n(),i(S,{onClick:()=>y(s),key:s.id},{default:e(()=>[s.recipes.find(L=>L.name===m.recipe.name)?(n(),i(k,{key:1},{default:e(()=>[_("span",pe,d(s.name),1),ue]),_:2},1024)):(n(),i(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1})])):B("",!0)}}},me=["href"],fe=_("h3",null,"Składniki",-1),he={key:0},ye={key:1},xe={__name:"index",setup(m){const x=W(),w=H(),{currentRecipe:a}=C(w),f=T(),l=()=>f.value.$el.dismiss(null,"cancel"),h=()=>f.value.$el.dismiss(null,"confirm");Q(x,async(c,y)=>{l()});const $=U(()=>{const c=/(https?:\/\/)?(www\.)?[\w\-]+\.(com|com\.pl|pl)/,y=a.value.url.match(c);return y?y[0]:null});return(c,y)=>{const p=Z,r=J,u=K,z=X,k=M,S=Y,b=ie,s=ee,L=de,P=ne,j=te,A=q;return n(),i(A,null,{default:e(()=>[t(k,{style:{background:"var(--ion-color-light)"}},{default:e(()=>[t(z,null,{default:e(()=>[t(r,{slot:"start"},{default:e(()=>[t(p,{text:"",icon:"ioniconsArrowBackOutline"in c?c.ioniconsArrowBackOutline:o(se)},null,8,["icon"])]),_:1}),t(u,null,{default:e(()=>[g("Przepisy")]),_:1})]),_:1})]),_:1}),t(j,null,{default:e(()=>[_("h2",null,d(o(a).name),1),_("a",{href:o(a).url,class:"flex items-center"},[t(S,{size:"small",icon:"ioniconsGlobeOutline"in c?c.ioniconsGlobeOutline:o(ae),class:"mr-1"},null,8,["icon"]),g(" "+d(o($)),1)],8,me),fe,t(b,{ingredients:o(a).ingredients},null,8,["ingredients"]),o(a).steps?(n(),I("h3",he,"Przepis")):B("",!0),o(a).steps?(n(),I("p",ye,d(o(a).steps),1)):B("",!0),t(s,{class:"mt-8",id:"open-recipe-to-shopping-list-modal"},{default:e(()=>[g(" Dodaj do listy zakupowej ")]),_:1}),t(P,{class:"auto-height",ref_key:"modal",ref:f,trigger:"open-recipe-to-shopping-list-modal"},{default:e(()=>[t(L,{cancel:l,"confirm-modal":h,recipe:o(a)},null,8,["recipe"])]),_:1},512)]),_:1})]),_:1})}}};export{xe as default};
