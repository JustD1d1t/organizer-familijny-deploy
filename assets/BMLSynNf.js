import{_ as X,L as j,M as V,N as q,r as u,o as J,O as m,A as s,P as ee,a6 as te,t as d,z as l,Q as t,B as k,R as b,v as S,S as ae,T as oe,U as ne,V as se,W as le,X as ue,Y as re,Z as de,$ as ie,a0 as me,a5 as ce,y as pe,a8 as _e,a9 as ve,aa as be}from"./CtmnvVoy.js";import{_ as fe}from"./BVKwL09d.js";import{u as ye}from"./NPkqJmz_.js";const we={key:0,class:"inner-content"},ge={__name:"index",setup(ke){const{photos:h,photoFromCamera:Ie,selectPhotoFromData:xe}=ye(),I=j(),{removeExpenseFromStore:C,editExpense:D,getExpensePhoto:M}=I,{currentExpense:e}=V(I),{billCategories:N}=_e(),{openAlert:U}=ve(),B=q(),{uid:r}=V(B),x=ee(),f=u(""),T=u(null),E=u(null);u(!1);const y=u(e.value.shop),w=u(e.value.name),g=u(e.value.value),c=u(e.value.timestamp),i=u(e.value.familyMembers),P=()=>{let o;e.value.timestamp.seconds?o=new Date(e.value.timestamp.seconds*1e3):o=new Date(e.value.timestamp);const a=o.getFullYear(),p=String(o.getMonth()+1).padStart(2,"0"),_=String(o.getDate()).padStart(2,"0");c.value=`${a}-${p}-${_}`},z=async()=>{const o={name:w.value,value:Number(g.value),timestamp:new Date(c.value).getTime(),shop:y.value,familyMembers:i.value,userId:e.value.userId,id:e.value.id,category:f.value};await D(o,T.value,E.value),x.back()},F=async()=>{await C(e.value.id),x.back()},$=async()=>{const o=await M(e.value.id);o&&h.value.push({webviewPath:o,document:{title:"New Photo",description:"Photo taken with the app",timestamp:new Date}})};J(async()=>{await $(),P()});const A=o=>{i.value.includes(o.id)?i.value=i.value.filter(a=>a!=o.id):i.value.push(o.id)};return(o,a)=>{const p=ne,_=se,L=le,R=ue,v=re,O=be,Y=de,Z=ie,G=fe,H=me,K=ce,Q=te;return d(),m(Q,null,{default:s(()=>[l(R,{style:{background:"var(--ion-color-light)"}},{default:s(()=>[l(L,null,{default:s(()=>[t(e)&&t(e).userId===t(r)?(d(),m(_,{key:0,slot:"start"},{default:s(()=>[l(p,{type:"tertiary",strong:!0,color:"danger",onClick:a[0]||(a[0]=()=>t(U)("Usuwanie wydatku","Czy na pewno chcesz usunąć wydatek?","alert-button-confirm",F))},{default:s(()=>[k("Usuń")]),_:1})]),_:1})):b("",!0),t(e)&&t(e).userId===t(r)?(d(),m(_,{key:1,slot:"end"},{default:s(()=>[l(p,{type:"tertiary",strong:!0,color:"success",onClick:a[1]||(a[1]=n=>z())},{default:s(()=>[k("Zapisz")]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1}),l(K,{fullscreen:!0},{default:s(()=>[t(e)?(d(),S("div",we,[l(H,{lines:"none"},{default:s(()=>[l(v,{label:"Nazwa sklepu",type:"text",modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=n=>y.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),l(v,{label:"Nazwa wydatku",type:"text",modelValue:w.value,"onUpdate:modelValue":a[3]||(a[3]=n=>w.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),l(v,{label:"Całkowita kwota",type:"number",modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=n=>g.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),l(v,{label:"Data",type:"date",modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=n=>c.value=n),disabled:t(e).userId!==t(r)},null,8,["modelValue","disabled"]),l(Z,null,{default:s(()=>[l(Y,{label:"Kategoria","label-placement":"stacked",modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=n=>f.value=n)},{default:s(()=>[(d(!0),S(ae,null,oe(t(N),(n,W)=>(d(),m(O,{key:W,value:n},{default:s(()=>[k(pe(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(e).userId===t(r)?(d(),m(G,{key:0,members:t(e).familyMembers,onToggleMember:A},null,8,["members"])):b("",!0)]),_:1})])):b("",!0)]),_:1})]),_:1})}}},Ce=X(ge,[["__scopeId","data-v-620b380c"]]);export{Ce as default};
