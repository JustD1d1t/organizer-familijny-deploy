import{_ as A,t as n,N as c,A as e,v as I,R,S as v,B as y,y as d,at as N,M as O,r as T,o as V,z as t,P as o,x as _,Q as B,W as C,aQ as F,ap as G,Z as D,$ as E,aR as H,G as Q,i as U,aE as W,a2 as q,a8 as Z,U as J,a7 as K,V as X,aa as Y,T as ee,a0 as ne,a1 as te}from"./BVzA7Ocv.js";import{_ as oe}from"./-rGW2JFz.js";import{_ as se}from"./CXi93bau.js";import{a as ae,j as ie}from"./CHVAF33P.js";const ce={__name:"ingredients-list",props:{ingredients:{type:Array,required:!0,default:()=>[]}},setup(m){return(x,w)=>{const a=oe,f=se;return n(),c(f,{inset:!0,lines:!0,class:"p-2","bg-white":!0},{default:e(()=>[(n(!0),I(R,null,v(m.ingredients,l=>(n(),c(a,{key:l.id},{start:e(()=>[y(d(l.name),1)]),_:2},1024))),128))]),_:1})}}},le=A(ce,[["__scopeId","data-v-73e57f11"]]),re={key:0,class:"inner-content py-2"},_e={class:"line-through"},pe=_("span",null," dodane",-1),ue={class:"line-through"},de=_("span",null," dodane",-1),me={__name:"add-recipe-to-shopping-list-modal",props:{recipe:{type:Object,default:()=>{}},cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(m){const x=N(),{updateShoppingList:w,getAllShoppingLists:a}=x,{shoppingLists:f,collaboratedShoppingLists:l}=O(x),h=m,$=T(!1),i=T(""),g=async p=>{const r=p.recipes;if($.value=!0,r.find(u=>u.name===h.recipe.name)){const u=r.findIndex(z=>z.name===h.recipe.name);i.value=`Przepis "${h.recipe.name}" został usunięty z listy "${p.name}"`,r.splice(u,1)}else i.value=`Przepis "${h.recipe.name}" został dodany do listy "${p.name}"`,r.push(h.recipe);setTimeout(()=>{$.value=!1},2e3),await w({...p,recipes:r}),p.recipes=r};return V(async()=>{await a()}),(p,r)=>{const u=C,z=F,k=G,b=D,S=E;return m.recipe?(n(),I("div",re,[t(u,{class:"text-lg text-center"},{default:e(()=>[y("Wybierz listę do której chcesz dodać przepis")]),_:1}),t(S,{inset:!0,lines:"inset"},{default:e(()=>[t(z,null,{default:e(()=>[y(" Twoje listy ")]),_:1}),(n(!0),I(R,null,v(o(f),s=>(n(),c(b,{onClick:()=>g(s),key:s.id},{default:e(()=>[s.recipes.find(L=>L.name===m.recipe.name)?(n(),c(k,{key:1},{default:e(()=>[_("span",_e,d(s.name),1),pe]),_:2},1024)):(n(),c(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1}),o(l)&&o(l).length?(n(),c(u,{key:0,class:"text-lg"},{default:e(()=>[y("Listy do których zostałeś zaproszony")]),_:1})):B("",!0),t(S,{inset:!0,lines:"inset"},{default:e(()=>[(n(!0),I(R,null,v(o(l),s=>(n(),c(b,{onClick:()=>g(s),key:s.id},{default:e(()=>[s.recipes.find(L=>L.name===m.recipe.name)?(n(),c(k,{key:1},{default:e(()=>[_("span",ue,d(s.name),1),de]),_:2},1024)):(n(),c(k,{key:0},{default:e(()=>[_("p",null,d(s.name),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128))]),_:1})])):B("",!0)}}},fe=["href"],he=_("h3",null,"Składniki",-1),ge={key:0},ye={key:1},Le={__name:"index",setup(m){const x=W(),w=H(),{currentRecipe:a}=O(w),f=T(),l=()=>f.value.$el.dismiss(null,"cancel"),h=()=>f.value.$el.dismiss(null,"confirm");Q(x,async(i,g)=>{l()});const $=U(()=>{const i=/(https?:\/\/)?(www\.)?[\w\-]+\.(com|com\.pl|pl)/,g=a.value.url.match(i);return g?g[0]:null});return(i,g)=>{const p=Z,r=J,u=K,z=X,k=C,b=Y,S=le,s=ee,L=me,M=ne,P=te,j=q;return n(),c(j,null,{default:e(()=>[t(k,{style:{background:"var(--ion-color-light)"}},{default:e(()=>[t(z,null,{default:e(()=>[t(r,{slot:"start"},{default:e(()=>[t(p,{text:"",icon:"ioniconsArrowBackOutline"in i?i.ioniconsArrowBackOutline:o(ae)},null,8,["icon"])]),_:1}),t(u,null,{default:e(()=>[y("Przepisy")]),_:1})]),_:1})]),_:1}),t(P,null,{default:e(()=>[_("h2",null,d(o(a).name),1),_("a",{href:o(a).url,class:"flex items-center"},[t(b,{size:"small",icon:"ioniconsGlobeOutline"in i?i.ioniconsGlobeOutline:o(ie),class:"mr-1"},null,8,["icon"]),y(" "+d(o($)),1)],8,fe),he,t(S,{ingredients:o(a).ingredients},null,8,["ingredients"]),o(a).steps?(n(),I("h3",ge,"Przepis")):B("",!0),o(a).steps?(n(),I("p",ye,d(o(a).steps),1)):B("",!0),t(s,{class:"mt-8",id:"open-recipe-to-shopping-list-modal"},{default:e(()=>[y(" Dodaj do listy zakupowej ")]),_:1}),t(M,{class:"auto-height",ref_key:"modal",ref:f,trigger:"open-recipe-to-shopping-list-modal"},{default:e(()=>[t(L,{cancel:l,"confirm-modal":h,recipe:o(a)},null,8,["recipe"])]),_:1},512)]),_:1})]),_:1})}}};export{Le as default};
