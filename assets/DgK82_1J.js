import{_ as F,t as i,N as h,A as o,B as I,y as r,am as ee,X as N,v as u,R as T,Q as O,d as te,i as x,x as l,P as $,O as a,a1 as ne,ac as se,L as E,M as oe,Z as ae,z as t,l as g,an as le,S as ie,T as ce,U as re,a5 as ue,V as _e,W as pe,ao as de,ap as me,ag as fe,aq as xe,ar as he,Y as ve,$ as ye,as as be,at as ke,a9 as we,C as ge,D as Ie}from"./BST2lCDv.js";import{_ as Ce}from"./sob76yTl.js";import{u as Se}from"./DxgXLfUV.js";const Be={__name:"filter-tab",props:{filter:{type:Object,required:!0},active:{type:String,required:!0}},emits:["click"],setup(n,{emit:d}){const s=d;return(m,_)=>{const p=N;return i(),h(p,{onClick:_[0]||(_[0]=c=>s("click",n.filter)),class:ee(["text-xl",{active:n.active===n.filter.value}]),size:"small",type:"tertiary"},{default:o(()=>[I(r(n.filter.label),1)]),_:1},8,["class"])}}},$e=F(Be,[["__scopeId","data-v-1100ad1c"]]),Ee={class:"flex justify-between w-full mb-4"},Fe={__name:"filter-tabs",props:{filters:{type:Array,default:()=>[]},active:{type:String,default:"Wszystkie"}},emits:["click"],setup(n,{emit:d}){const s=d;return(m,_)=>{const p=$e;return i(),u("div",Ee,[(i(!0),u(T,null,O(n.filters,c=>(i(),h(p,{key:c,filter:c,active:n.active,onClick:f=>s("click",c)},null,8,["filter","active","onClick"]))),128))])}}},Ne={class:"flex h-full w-full justify-between items-start"},Te={class:"flex flex-col"},Oe={class:"flex-flex-col"},Ve={class:"text-base expense-shop"},ze={key:0},Le={key:1},Me={class:"text-lg font-bold expense-date"},Ae={class:"flex items-end font-bold"},De={class:"flex items-start"},je={class:"text-3xl price-big"},Ue={class:"text-sm price-small"},We=te({__name:"item",props:{expense:{}},emits:["openEditExpense","removeExpense"],setup(n,{emit:d}){const s=n,m=x(()=>parseInt(s.expense.value)),_=x(()=>(Number(s.expense.value)-Math.floor(Number(s.expense.value))).toFixed(2).toString().slice(2)),p=x(()=>s.expense.timestamp.seconds?new Date(s.expense.timestamp.seconds*1e3).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}):new Date(s.expense.timestamp).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}));return(c,f)=>{const v=ne;return i(),h(v,{class:"flex flex-col py-2 pl-6 pr-2 bg-white rounded-2xl shadow-lg"},{default:o(()=>[l("div",Ne,[l("div",Te,[l("div",Oe,[l("p",Ve,[I(r(c.expense.shop)+" ",1),c.expense.name?(i(),u("span",ze,"- "+r(c.expense.name),1)):$("",!0),c.expense.category?(i(),u("span",Le," - "+r(c.expense.category.toLowerCase()),1)):$("",!0)])]),l("p",Me,r(a(p)),1)]),l("div",Ae,[l("p",De,[l("span",je,r(a(m)),1),l("span",Ue,r(a(_)),1)])])])]),_:1})}}}),qe=n=>(ge("data-v-7decea65"),n=n(),Ie(),n),Pe={key:0,class:"w-full flex justify-center items-center h-full"},Re={key:1},Qe={key:2,class:"h-full overflow-auto"},Xe={class:"text-2xl my-4 flex justify-between font-bold"},He=qe(()=>l("span",null,"Razem ",-1)),Ye={__name:"index",setup(n){const d=se(),{uid:s}=E(d),m=oe(),{queryExpenses:_,setCurrentExpense:p,handleExpensesVisibility:c}=m,{expenses:f,isLoading:v,showSelect:b}=E(m),V=[{value:"all",label:"Wszystkie"},{value:"my",label:"Moje"},{value:"common",label:"Wspólne"}];Se(async()=>{await _()},"$biXQIOSgVL");const z=e=>{p(e),g(`/expenses/${e.id}`)},L=()=>{g("/expenses/new")},M=x(()=>parseFloat(k.value.reduce((e,C)=>Number(e)+Number(C.value),0)).toFixed(2)),k=x(()=>b.value==="all"?f.value:b.value==="my"?f.value.filter(e=>e.userId===s.value&&e.familyMembers.length===0):f.value.filter(e=>e.userId===s.value&&e.familyMembers.length>0||e.familyMembers.includes(s.value))),A=async()=>{await le.open("expense-filter")},D=()=>{g("/expenses/charts")};return(e,C)=>{const j=ie,U=ce,S=re,w=ue,B=N,W=_e,q=pe,P=Fe,R=Ce,Q=de,X=me,H=We,Y=fe,Z=xe,G=he,J=ve,K=ae;return i(),h(K,null,{default:o(()=>[t(q,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[t(W,null,{default:o(()=>[t(j,null,{default:o(()=>[I("Wydatki")]),_:1}),t(S,{slot:"start"},{default:o(()=>[t(U,{text:"",icon:"ioniconsArrowBackOutline"in e?e.ioniconsArrowBackOutline:a(ye)},null,8,["icon"])]),_:1}),t(S,{slot:"end"},{default:o(()=>[t(B,{type:"tertiary",onClick:D},{default:o(()=>[t(w,{slot:"icon-only",icon:"ioniconsBarChartOutline"in e?e.ioniconsBarChartOutline:a(be)},null,8,["icon"])]),_:1}),t(B,{type:"tertiary",onClick:A},{default:o(()=>[t(w,{slot:"icon-only",icon:"ioniconsFilter"in e?e.ioniconsFilter:a(ke)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),t(J,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:o(()=>[l("div",null,[t(P,{filters:V,active:a(b),onClick:a(c)},null,8,["active","onClick"]),t(R)]),a(v)?(i(),u("div",Pe,[t(Q,{name:"lines-sharp"})])):!a(v)&&!a(k).length?(i(),u("h2",Re," Brak wydatków ")):(i(),u("div",Qe,[l("div",Xe,[He,l("span",null,r(a(M))+" zł",1)]),t(X,{class:"mb-6"}),t(Y,{lines:"none",class:"overflow-auto h-[70%]"},{default:o(()=>[(i(!0),u(T,null,O(a(k),y=>(i(),h(H,{key:`${y.name}-${y.id}`,expense:y,onClick:()=>z(y)},null,8,["expense","onClick"]))),128))]),_:1})])),t(G,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[t(Z,{onClick:L},{default:o(()=>[t(w,{icon:"ioniconsAdd"in e?e.ioniconsAdd:a(we)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Ke=F(Ye,[["__scopeId","data-v-7decea65"]]);export{Ke as default};
