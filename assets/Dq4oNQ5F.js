import{u as v,aS as z,r as _,N as A,A as a,a2 as V,t as R,z as s,B as p,P as T,ah as B,x as o,l as N,a7 as j,V as E,W as M,aq as F,Z as H,T as L,a1 as P,aJ as U,ar as Z}from"./flSHHRYz.js";import{_ as D}from"./WN_WW1Vs.js";import"./CHVAF33P.js";const J=o("p",null,"Możesz dodawać przepisy ze stron:",-1),O=o("ul",{class:"my-2"},[o("li",null,"www.przepisy.pl"),o("li",null,"www.aniagotuje.pl"),o("li",null,"www.kwestiasmaku.com"),o("li",null,"www.kucnialidla.pl"),o("li",null,"www.poprostupycha.com.pl"),o("li",null,"www.aniastarmach.pl"),o("li",null,"www.doradcasmaku.pl")],-1),W=o("span",{class:"text-center block"},"lub",-1),X={__name:"index",props:{cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup($){const m=v(),{backendUrl:f}=Z(),y=localStorage.getItem("uid"),w=z(),{addRecipe:h}=w,k=_(),t=_(""),g=async i=>{try{return(await U.get(`${f}/html`,{params:{url:i}})).data.data}catch(e){console.error("Error fetching content:",e)}},x=async()=>{const i=await g(t.value),e=document.createElement("html");e.innerHTML=i;let n,l,r=[];t.value.includes("przepisy.pl")?(n=e.querySelector(".title").textContent,l=e.querySelectorAll(".ingredients-list-content-item")):t.value.includes("aniagotuje.pl")?(n=e.querySelector(".article-content h1").textContent,l=e.querySelectorAll(".recipe-ing-list li")):t.value.includes("kwestiasmaku.com")?(n=e.querySelector("h1.przepis").textContent,l=e.querySelectorAll(".field-name-field-skladniki ul li")):t.value.includes("kuchnialidla.pl")?(n=e.querySelector(".lead h1").textContent,l=e.querySelectorAll(".skladniki ul li")):t.value.includes("poprostupycha.com.pl")?(n=e.querySelector("h1.entry-title").textContent,l=e.querySelectorAll(".ingredient")):t.value.includes("aniastarmach.pl")?(n=e.querySelector("h1.recipe-name").textContent,l=e.querySelectorAll(".recipe-what-to-buy ul li")):t.value.includes("doradcasmaku.pl")&&(n=e.querySelector("h1.grid-in-title").textContent,l=e.querySelectorAll(".grid-in-ingredients tbody tr")),l.forEach(u=>{r.push({name:u.textContent})});const c={name:n,ingredients:r,userId:y,url:t.value};await h(c),m.back()},S=()=>{N("/recipes/new/own")};return(i,e)=>{const n=j,l=E,r=M,c=F,u=H,q=D,d=L,C=P,b=V;return R(),A(b,null,{default:a(()=>[s(r,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[s(l,null,{default:a(()=>[s(n,null,{default:a(()=>[p("Nowa lista zakupowa")]),_:1})]),_:1})]),_:1}),s(C,{fullscreen:!0},{default:a(()=>[s(u,{lines:"none"},{default:a(()=>[s(c,{label:"Adres strony","label-placement":"floating",ref_key:"input",ref:k,type:"text",modelValue:T(t),"onUpdate:modelValue":e[0]||(e[0]=I=>B(t)?t.value=I:null)},null,8,["modelValue"])]),_:1}),s(q,{class:"mt-8"},{default:a(()=>[J,O]),_:1}),s(d,{expand:"block",onClick:x,class:"my-6"},{default:a(()=>[p(" Dodaj przepis ze strony ")]),_:1}),W,s(d,{expand:"block",onClick:S,class:"my-6"},{default:a(()=>[p(" Zapisz swój własny przepis ")]),_:1})]),_:1})]),_:1})}}};export{X as default};
