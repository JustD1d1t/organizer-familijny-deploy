import{_ as fe,L as ye,M as be,r as d,o as ge,N as m,O as ke,t as s,A as a,z as t,P as o,B as r,Q as V,v,R as b,S as g,x as Q,T as we,U as Ve,V as Ie,W as Ce,X as xe,Y as Ne,Z as De,$ as Ue,a0 as Me,a1 as Pe,a2 as Se,a3 as Be,a4 as ze,a5 as Ee,y as L,a6 as $e,a7 as Te,a8 as Fe,a9 as Ae,aa as Oe}from"./DRa_VBAG.js";import{_ as Re}from"./b_PMGHYX.js";import{_ as We}from"./BgxoZcP-.js";import{_ as Le}from"./B0difAmE.js";import{u as je}from"./CVY5ACMZ.js";const Ke={key:0,class:"inner-content"},Ze={class:"modal-content"},Ye={__name:"index-full-read",setup(Ge){const{photos:I,photoFromCamera:He,selectPhotoFromData:Qe}=je(),j=ye(),{removeExpenseFromStore:X,editExpense:q,getExpensePhoto:J}=j,{currentExpense:n}=be(j),{billCategories:D}=Te(),{openAlert:h}=Fe(),K=ke(),_=localStorage.getItem("uid");d("");const U=d(!1),ee=d(null),le=d(null);d(!1);const f=d(null),i=d({name:"",price:"",category:""}),M=d(n.value.shop),P=d(n.value.name),S=d(n.value.value),C=d(n.value.timestamp),k=d(n.value.familyMembers),x=d([...n.value.items]),te=()=>{let u;n.value.timestamp.seconds?u=new Date(n.value.timestamp.seconds*1e3):u=new Date(n.value.timestamp);const l=u.getFullYear(),w=String(u.getMonth()+1).padStart(2,"0"),y=String(u.getDate()).padStart(2,"0");C.value=`${l}-${w}-${y}`},ae=()=>{U.value=!1},Z=d(!1),Y=d(!1),oe=async()=>{const u={name:P.value,value:Number(S.value),timestamp:new Date(C.value).getTime(),shop:M.value,familyMembers:k.value,userId:n.value.userId,id:n.value.id,category:n.value.category,items:x.value};await q(u,ee.value,le.value),K.back()},ne=async()=>{await X(n.value.id),K.back()},ue=async()=>{const u=await J(n.value.id);u&&I.value.push({webviewPath:u,document:{title:"New Photo",description:"Photo taken with the app",timestamp:new Date}})},se=async()=>{U.value=!0};ge(async()=>{await ue(),te()});const de=u=>{k.value.includes(u.id)?k.value=k.value.filter(l=>l!=u.id):k.value.push(u.id)},N=u=>Z.value=u,B=u=>Y.value=u,re=u=>{f.value=u,N(!0)},ie=()=>{x.value.push({name:i.value.name,price:parseFloat(i.value.price),category:i.value.category}),B(!1),i.value={name:"",price:"",category:""}};return(u,l)=>{const w=we,y=Ve,z=Ie,E=Ce,p=xe,$=Ae,T=Ne,F=De,me=Re,pe=Ue,ce=We,A=Le,ve=Me,G=Oe,O=Pe,H=Se,R=Be,W=ze,_e=Ee;return s(),m(_e,null,{default:a(()=>[t(E,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[t(z,null,{default:a(()=>[o(n)&&o(n).userId===o(_)?(s(),m(y,{key:0,slot:"start"},{default:a(()=>[t(w,{type:"tertiary",strong:!0,color:"danger",onClick:l[0]||(l[0]=()=>o(h)("Usuwanie wydatku","Czy na pewno chcesz usunąć wydatek?","alert-button-confirm",ne))},{default:a(()=>[r("Usuń")]),_:1})]),_:1})):V("",!0),o(n)&&o(n).userId===o(_)?(s(),m(y,{key:1,slot:"end"},{default:a(()=>[t(w,{type:"tertiary",strong:!0,color:"success",onClick:l[1]||(l[1]=e=>oe())},{default:a(()=>[r("Zapisz")]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1}),t(W,{fullscreen:!0},{default:a(()=>[o(n)?(s(),v("div",Ke,[t(pe,{lines:"none"},{default:a(()=>[t(p,{label:"Nazwa sklepu",type:"text",modelValue:M.value,"onUpdate:modelValue":l[2]||(l[2]=e=>M.value=e),disabled:o(n).userId!==o(_)},null,8,["modelValue","disabled"]),t(p,{label:"Nazwa wydatku",type:"text",modelValue:P.value,"onUpdate:modelValue":l[3]||(l[3]=e=>P.value=e),disabled:o(n).userId!==o(_)},null,8,["modelValue","disabled"]),t(p,{label:"Całkowita kwota",type:"number",modelValue:S.value,"onUpdate:modelValue":l[4]||(l[4]=e=>S.value=e),disabled:o(n).userId!==o(_)},null,8,["modelValue","disabled"]),t(p,{label:"Data",type:"date",modelValue:C.value,"onUpdate:modelValue":l[5]||(l[5]=e=>C.value=e),disabled:o(n).userId!==o(_)},null,8,["modelValue","disabled"]),t(F,null,{default:a(()=>[t(T,{label:"Kategoria","label-placement":"stacked",modelValue:o(n).category,"onUpdate:modelValue":l[6]||(l[6]=e=>o(n).category=e)},{default:a(()=>[(s(!0),v(b,null,g(o(D),(e,c)=>(s(),m($,{key:c,value:e},{default:a(()=>[r(L(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n).userId===o(_)?(s(),m(me,{key:0,members:o(n).familyMembers,onToggleMember:de},null,8,["members"])):V("",!0)]),_:1}),t(A,null,{default:a(()=>[(s(!0),v(b,null,g(x.value,(e,c)=>(s(),m(ce,{key:c,name:e.name,price:e.price,category:e.category,onButtonClick:()=>re(e),onRemoveClick:()=>x.value.splice(c,1)},null,8,["name","price","category","onButtonClick","onRemoveClick"]))),128))]),_:1}),t(w,{type:"tertiary",class:"w-full",onClick:l[7]||(l[7]=e=>B(!0))},{default:a(()=>[t(ve,{slot:"icon-only",icon:"ioniconsAdd"in u?u.ioniconsAdd:o($e)},null,8,["icon"]),r(" Dodaj produkt ")]),_:1}),o(I).length?(s(),v("div",{key:0,onClick:se},[(s(!0),v(b,null,g(o(I),e=>(s(),m(G,{key:e.webviewPath,src:e.webviewPath},null,8,["src"]))),128))])):V("",!0),t(O,{class:"auto-height modal-img","is-open":U.value,onDidDismiss:l[8]||(l[8]=e=>ae())},{default:a(()=>[Q("div",Ze,[Q("div",null,[(s(!0),v(b,null,g(o(I),e=>(s(),m(G,{key:e.webviewPath,src:e.webviewPath},null,8,["src"]))),128))])])]),_:1},8,["is-open"])])):V("",!0),t(O,{"is-open":Z.value,onWillDismiss:l[13]||(l[13]=()=>N(!1))},{default:a(()=>[t(E,null,{default:a(()=>[t(z,null,{default:a(()=>[t(H,null,{default:a(()=>[r("Edytuj produkt")]),_:1}),t(y,{slot:"end"},{default:a(()=>[t(R,{onClick:l[9]||(l[9]=e=>N(!1))},{default:a(()=>[r("Close")]),_:1})]),_:1})]),_:1})]),_:1}),t(W,{class:"ion-padding"},{default:a(()=>[t(A,null,{default:a(()=>[t(p,{modelValue:f.value.name,"onUpdate:modelValue":l[10]||(l[10]=e=>f.value.name=e),label:"Nazwa produktu"},null,8,["modelValue"]),t(p,{modelValue:f.value.price,"onUpdate:modelValue":l[11]||(l[11]=e=>f.value.price=e),label:"Cena produktu",type:"number"},null,8,["modelValue"]),t(F,null,{default:a(()=>[t(T,{label:"Kategoria","label-placement":"stacked",placeholder:"--- Wybierz kategorię ---",modelValue:f.value.category,"onUpdate:modelValue":l[12]||(l[12]=e=>f.value.category=e)},{default:a(()=>[(s(!0),v(b,null,g(o(D),(e,c)=>(s(),m($,{key:c,value:e},{default:a(()=>[r(L(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),t(O,{"is-open":Y.value,onWillDismiss:l[18]||(l[18]=()=>B(!1))},{default:a(()=>[t(E,null,{default:a(()=>[t(z,null,{default:a(()=>[t(y,{slot:"start"},{default:a(()=>[t(R,{onClick:l[14]||(l[14]=e=>N(!1))},{default:a(()=>[r("anuluj")]),_:1})]),_:1}),t(H,null,{default:a(()=>[r("Nowy produkt")]),_:1}),t(y,{slot:"end"},{default:a(()=>[t(R,{onClick:ie},{default:a(()=>[r("Zapisz")]),_:1})]),_:1})]),_:1})]),_:1}),t(W,{class:"ion-padding"},{default:a(()=>[t(A,null,{default:a(()=>[t(p,{modelValue:i.value.name,"onUpdate:modelValue":l[15]||(l[15]=e=>i.value.name=e),label:"Nazwa produktu"},null,8,["modelValue"]),t(p,{modelValue:i.value.price,"onUpdate:modelValue":l[16]||(l[16]=e=>i.value.price=e),label:"Cena produktu",type:"number"},null,8,["modelValue"]),t(F,null,{default:a(()=>[t(T,{label:"Kategoria","label-placement":"stacked",placeholder:"--- Wybierz kategorię ---",modelValue:i.value.category,"onUpdate:modelValue":l[17]||(l[17]=e=>i.value.category=e)},{default:a(()=>[(s(!0),v(b,null,g(o(D),(e,c)=>(s(),m($,{key:c,value:e},{default:a(()=>[r(L(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1})}}},ll=fe(Ye,[["__scopeId","data-v-f741fb3e"]]);export{ll as default};
