import{L as Q,u as X,r as n,N as w,A as o,a1 as Y,t as r,z as e,B as b,x as $,P as s,ag as c,v as y,S as k,R as h,Q as q,T as J,U as ee,V as te,W as oe,X as ae,Y as le,Z as ne,ad as se,a0 as ue,y as re,a2 as de,a3 as ce,a4 as ie}from"./4SDWm5CT.js";import{_ as pe}from"./BAiSJCV0.js";import{u as me}from"./DU-Eg9pg.js";const _e={class:"inner-content"},fe={key:0},Ve={__name:"index",setup(ve){const{photos:x,photoFromCamera:C,selectPhotoFromData:E}=me(),S=Q(),{addExpenseToStore:B}=S,N=localStorage.getItem("uid"),{billCategories:D}=de(),P=X(),i=n(""),p=n(""),m=n(""),_=n(""),f=n(""),d=n([]),g=n(null),I=n(null),z=async()=>{try{const{pb64:l,doc:t}=await E();I.value=l,g.value=t}catch(l){console.error("Error selecting photo",l)}},T=async()=>{try{const{pb64:l,doc:t}=await C();I.value=l,g.value=t,photoEdited.value=!0}catch(l){console.error("Error adding photo",l)}},U=async()=>{const l={name:p.value.toLowerCase(),value:parseFloat(m.value),timestamp:new Date(_.value).getTime(),shop:f.value.toLowerCase(),userId:N,familyMembers:d.value,category:i.value};await B(l,g.value,I.value),P.back()},F=l=>{d.value.includes(l.id)?d.value=d.value.filter(t=>t!=l.id):d.value.push(l.id)};return(l,t)=>{const V=J,L=ee,M=te,j=oe,v=ae,u=le,R=ce,W=ne,Z=pe,A=se,G=ie,H=ue,K=Y;return r(),w(K,null,{default:o(()=>[e(j,null,{default:o(()=>[e(M,null,{default:o(()=>[e(L,{slot:"end"},{default:o(()=>[e(V,{fill:"clear",strong:!0,onClick:t[0]||(t[0]=a=>U())},{default:o(()=>[b("Dodaj")]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:o(()=>[$("div",_e,[e(A,null,{default:o(()=>[e(u,null,{default:o(()=>[e(v,{"data-test":"shop-input",label:"Nazwa sklepu","label-placement":"floating",class:"shopInput",type:"text",modelValue:s(f),"onUpdate:modelValue":t[1]||(t[1]=a=>c(f)?f.value=a:null)},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(v,{"data-test":"name-input",label:"Nazwa wydatku","label-placement":"floating",class:"nameInput",type:"text",modelValue:s(p),"onUpdate:modelValue":t[2]||(t[2]=a=>c(p)?p.value=a:null)},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(v,{"data-test":"value-input",label:"Całkowita kwota","label-placement":"floating",class:"valueInput",type:"number",modelValue:s(m),"onUpdate:modelValue":t[3]||(t[3]=a=>c(m)?m.value=a:null)},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(v,{"data-test":"date-input",label:"Data","label-placement":"floating",class:"dateInput",type:"date",modelValue:s(_),"onUpdate:modelValue":t[4]||(t[4]=a=>c(_)?_.value=a:null)},null,8,["modelValue"])]),_:1}),e(u,null,{default:o(()=>[e(W,{label:"Kategoria",modelValue:s(i),"onUpdate:modelValue":t[5]||(t[5]=a=>c(i)?i.value=a:null)},{default:o(()=>[(r(!0),y(h,null,k(s(D),(a,O)=>(r(),w(R,{key:O,value:a},{default:o(()=>[b(re(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(Z,{onToggleMember:F}),e(u,null,{default:o(()=>[e(V,{onClick:T},{default:o(()=>[b("Zrób zdjęcie")]),_:1}),e(V,{onClick:z,class:"ml-auto"},{default:o(()=>[b("Wybierz zdjęcie")]),_:1})]),_:1})]),_:1}),s(x).length?(r(),y("div",fe,[(r(!0),y(h,null,k(s(x),a=>(r(),w(G,{key:a.filepath,src:a.webviewPath},null,8,["src"]))),128))])):q("",!0)])]),_:1})]),_:1})}}};export{Ve as default};
