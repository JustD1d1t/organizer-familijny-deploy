import{_ as E,t as c,N as v,A as a,B as g,y as u,am as ee,X as F,v as _,R as N,Q as T,d as te,i as x,x as i,P as B,O as l,a1 as ne,ac as se,L as $,M as oe,r as ae,Z as le,z as t,l as w,an as ie,S as ce,T as re,U as ue,a5 as _e,V as pe,W as de,ao as me,ap as fe,ag as xe,aq as ve,ar as he,Y as ye,$ as be,as as ke,at as we,a9 as ge,C as Ie,D as Ce}from"./Dllh6qvR.js";import{_ as Se}from"./MLglU4Su.js";import{u as Be}from"./BKAuPVDl.js";const $e={__name:"filter-tab",props:{filter:{type:Object,required:!0},active:{type:String,required:!0}},emits:["click"],setup(n,{emit:m}){const s=m;return(f,p)=>{const d=F;return c(),v(d,{onClick:p[0]||(p[0]=o=>s("click",n.filter)),class:ee(["text-xl",{active:n.active===n.filter.value}]),size:"small",type:"tertiary"},{default:a(()=>[g(u(n.filter.label),1)]),_:1},8,["class"])}}},Ee=E($e,[["__scopeId","data-v-1100ad1c"]]),Fe={class:"flex justify-between w-full mb-4"},Ne={__name:"filter-tabs",props:{filters:{type:Array,default:()=>[]},active:{type:String,default:"Wszystkie"}},emits:["click"],setup(n,{emit:m}){const s=m;return(f,p)=>{const d=Ee;return c(),_("div",Fe,[(c(!0),_(N,null,T(n.filters,o=>(c(),v(d,{key:o,filter:o,active:n.active,onClick:h=>s("click",o)},null,8,["filter","active","onClick"]))),128))])}}},Te={class:"flex h-full w-full justify-between items-start"},ze={class:"flex flex-col"},Me={class:"flex-flex-col"},Oe={class:"text-base expense-shop"},Ve={key:0},Le={key:1},je={class:"text-lg font-bold expense-date"},Ae={class:"flex items-end font-bold"},De={class:"flex items-start"},We={class:"text-3xl price-big"},Ue={class:"text-sm price-small"},qe=te({__name:"item",props:{expense:{}},emits:["openEditExpense","removeExpense"],setup(n,{emit:m}){const s=n,f=x(()=>parseInt(s.expense.value)),p=x(()=>(Number(s.expense.value)-Math.floor(Number(s.expense.value))).toFixed(2).toString().slice(2)),d=x(()=>s.expense.timestamp.seconds?new Date(s.expense.timestamp.seconds*1e3).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}):new Date(s.expense.timestamp).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}));return(o,h)=>{const r=ne;return c(),v(r,{class:"flex flex-col py-2 pl-6 pr-2 bg-white rounded-2xl shadow-lg"},{default:a(()=>[i("div",Te,[i("div",ze,[i("div",Me,[i("p",Oe,[g(u(o.expense.shop)+" ",1),o.expense.name?(c(),_("span",Ve,"- "+u(o.expense.name),1)):B("",!0),o.expense.category?(c(),_("span",Le," - "+u(o.expense.category.toLowerCase()),1)):B("",!0)])]),i("p",je,u(l(d)),1)]),i("div",Ae,[i("p",De,[i("span",We,u(l(f)),1),i("span",Ue,u(l(p)),1)])])])]),_:1})}}}),Pe=n=>(Ie("data-v-3e19b08b"),n=n(),Ce(),n),Re={key:0,class:"w-full flex justify-center items-center h-full"},Qe={key:1},Xe={key:2,class:"h-full overflow-auto"},He={class:"text-2xl my-4 flex justify-between font-bold"},Ye=Pe(()=>i("span",null,"Razem ",-1)),Ze={__name:"index",setup(n){const m=se(),{uid:s}=$(m),f=oe(),{queryExpenses:p,setCurrentExpense:d}=f,{expenses:o,isLoading:h}=$(f),r=ae("all"),z=[{value:"all",label:"Wszystkie"},{value:"my",label:"Moje"},{value:"common",label:"Wspólne"}];Be(async()=>{await p()},"$biXQIOSgVL");const M=e=>{d(e),w(`/expenses/${e.id}`)},O=()=>{w("/expenses/new")},V=x(()=>parseFloat(b.value.reduce((e,I)=>Number(e)+Number(I.value),0)).toFixed(2)),b=x(()=>r.value==="all"?o.value:r.value==="my"?o.value.filter(e=>e.userId===s.value&&e.familyMembers.length===0):o.value.filter(e=>e.userId===s.value&&e.familyMembers.length>0||e.familyMembers.includes(s.value))),L=async()=>{await ie.open("expense-filter")},j=e=>{e.label==="Wszystkie"?r.value="all":e.label==="Moje"?r.value="my":r.value="common"},A=()=>{w("/expenses/charts")};return(e,I)=>{const D=ce,W=re,C=ue,k=_e,S=F,U=pe,q=de,P=Ne,R=Se,Q=me,X=fe,H=qe,Y=xe,Z=ve,G=he,J=ye,K=le;return c(),v(K,null,{default:a(()=>[t(q,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[t(U,null,{default:a(()=>[t(D,null,{default:a(()=>[g("Wydatki")]),_:1}),t(C,{slot:"start"},{default:a(()=>[t(W,{text:"",icon:"ioniconsArrowBackOutline"in e?e.ioniconsArrowBackOutline:l(be)},null,8,["icon"])]),_:1}),t(C,{slot:"end"},{default:a(()=>[t(S,{type:"tertiary",onClick:A},{default:a(()=>[t(k,{slot:"icon-only",icon:"ioniconsBarChartOutline"in e?e.ioniconsBarChartOutline:l(ke)},null,8,["icon"])]),_:1}),t(S,{type:"tertiary",onClick:L},{default:a(()=>[t(k,{slot:"icon-only",icon:"ioniconsFilter"in e?e.ioniconsFilter:l(we)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),t(J,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:a(()=>[i("div",null,[t(P,{filters:z,active:l(r),onClick:j},null,8,["active"]),t(R)]),l(h)?(c(),_("div",Re,[t(Q,{name:"lines-sharp"})])):!l(h)&&!l(b).length?(c(),_("h2",Qe," Brak wydatków ")):(c(),_("div",Xe,[i("div",He,[Ye,i("span",null,u(l(V))+" zł",1)]),t(X,{class:"mb-6"}),t(Y,{lines:"none",class:"overflow-auto h-[70%]"},{default:a(()=>[(c(!0),_(N,null,T(l(b),y=>(c(),v(H,{key:`${y.name}-${y.id}`,expense:y,onClick:()=>M(y)},null,8,["expense","onClick"]))),128))]),_:1})])),t(G,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:a(()=>[t(Z,{onClick:O},{default:a(()=>[t(k,{icon:"ioniconsAdd"in e?e.ioniconsAdd:l(ge)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}},et=E(Ze,[["__scopeId","data-v-3e19b08b"]]);export{et as default};
