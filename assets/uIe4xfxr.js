import{an as U,aC as M,ao as Z,r as c,N as z,A as a,a2 as A,t as D,z as o,B as m,x as F,P as l,ai as v,l as _,a7 as P,V as R,W as h,X as O,$ as W,T as X,aD as q,a1 as G,a4 as J}from"./WOMjux0z.js";import{_ as K}from"./Dg7MmqRc.js";const Q={class:"flex items-center h-full w-full"},ae={__name:"index",setup(Y){const w=U(),{getNotifications:y}=w,{openToast:d}=J(),T=M(),{loginUser:b}=T,k=Z(),{getFamilyDetails:I}=k,t=c(""),s=c("");c("");const V=()=>{d("Zalogowano pomyślnie")},f=e=>{d(e,"danger")},C=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()),r=c(""),i=c(""),j=async()=>{if(r.value="",i.value="",t.value||(r.value="Email jest wymagany."),C(t.value)||(r.value="Nieprawidłowy format email."),s.value||(i.value="Hasło jest wymagane."),s.value.length<6&&(i.value="Hasło musi mieć co najmniej 6 znaków."),!(r.value||i.value))try{const e=await b(t.value,s.value);e.error?f(e.error):(_("/"),await y(),await I(),V())}catch(e){f(e)}};return(e,n)=>{const x=P,N=R,S=h,g=O,L=W,p=X,B=K,E=q,$=G,H=A;return D(),z(H,null,{default:a(()=>[o(S,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[o(N,null,{default:a(()=>[o(x,null,{default:a(()=>[m("Logowanie")]),_:1})]),_:1})]),_:1}),o($,{fullscreen:!0},{default:a(()=>[F("div",Q,[o(B,{class:"p-8 w-full"},{title:a(()=>[m(" Logowanie ")]),default:a(()=>[o(L,{lines:"none",class:"pb-4"},{default:a(()=>[o(g,{label:"Email",type:"email",modelValue:l(t),"onUpdate:modelValue":n[0]||(n[0]=u=>v(t)?t.value=u:null),error:l(r)},null,8,["modelValue","error"]),o(g,{label:"Hasło",type:"password",modelValue:l(s),"onUpdate:modelValue":n[1]||(n[1]=u=>v(s)?s.value=u:null),error:l(i)},null,8,["modelValue","error"])]),_:1}),o(p,{class:"w-full mt-4",expand:"block",onClick:j},{default:a(()=>[m("Zaloguj")]),_:1}),o(p,{class:"w-full mt-4",expand:"block",fill:"outline",onClick:n[2]||(n[2]=u=>("navigateTo"in e?e.navigateTo:l(_))("/register")),type:"secondary"},{default:a(()=>[m("Rejestracja")]),_:1}),o(p,{class:"w-full mt-4",expand:"block",fill:"clear",onClick:n[3]||(n[3]=u=>("navigateTo"in e?e.navigateTo:l(_))("/reset-password")),type:"tertiary"},{default:a(()=>[m("Zapomniałem hasła")]),_:1})]),_:1})]),o(E,{"is-open":e.isOpen,message:e.toastMessage,duration:2e3},null,8,["is-open","message"])]),_:1})]),_:1})}}};export{ae as default};
