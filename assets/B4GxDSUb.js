import{av as U,M as d,aw as j,aN as A,i as x,N as m,A as t,aQ as E,a5 as P,t as c,z as r,P as n,B as f,y as M,Q as p,x as Q,v as R,a2 as Z,V as $,W as H,T as O,a4 as W}from"./DRa_VBAG.js";const q={key:0,class:"w-full flex justify-between flex-wrap"},L={__name:"index",setup(G){const v=U(),{updateNotification:S,sendNotification:w}=v,{notifications:B}=d(v),y=j(),{updateMembers:k,getFamilyDetails:C}=y,{familyMembersDetails:s,familyMembers:D}=d(y),T=A(),{email:z}=d(T),V=E().params,u=localStorage.getItem("uid"),e=x(()=>B.value.find(o=>o.id===V.id)),I=x(()=>z.value!==""?z.value:localStorage.getItem("email")),b=async o=>{const a={...e.value,accepted:o};await C(e.value.ownerId),await S(a);const l=[...s.value].find(i=>i.id===u);e.value.accepted=o,o?(l&&(l.status="accepted"),await k(s.value,[...D.value,u],e.value.ownerId),await w({title:`Użytkownik "${I.value}" zaakceptował zaproszenie do rodziny`,content:"Zaproszenie do listy nie zostało zaakceptowane"},e.value.ownerId)):(await w({title:`Użytkownik "${I.value}" nie zaakceptował zaproszenie do rodziny`,content:"Zaproszenie do listy zostało nie zaakceptowane"},e.value.ownerId),s=s.filter(i=>i.id!==u),await k(s,_,e.value.ownerId))};return(o,a)=>{const g=Z,l=$,i=H,N=O,h=W,F=P;return c(),m(F,null,{default:t(()=>[r(i,{style:{background:"var(--ion-color-light)"}},{default:t(()=>[r(l,null,{default:t(()=>[n(e)?(c(),m(g,{key:0},{default:t(()=>[f(M(n(e).title),1)]),_:1})):p("",!0)]),_:1})]),_:1}),n(e)?(c(),m(h,{key:0},{default:t(()=>[Q("div",null,M(n(e).content),1),n(e).type==="invitation-to-family"&&n(e).accepted===void 0?(c(),R("div",q,[r(N,{onClick:a[0]||(a[0]=()=>b(!1)),color:"danger"},{default:t(()=>[f(" Odrzuć ")]),_:1}),r(N,{onClick:a[1]||(a[1]=()=>b(!0)),color:"success"},{default:t(()=>[f(" Akceptuj ")]),_:1})])):p("",!0)]),_:1})):p("",!0)]),_:1})}}};export{L as default};
