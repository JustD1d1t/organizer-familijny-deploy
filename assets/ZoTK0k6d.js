import{_ as j,t as l,N as v,A as o,B as g,y as d,a9 as ne,T as R,v as w,R as U,S as q,L as Q,M as H,i as $,z as e,P as t,Q as B,aa as X,ab as oe,d as se,x as u,Z as le,r as ae,a2 as ie,l as L,ac as ce,a7 as re,a8 as ue,U as de,V as pe,W as _e,ad as me,ae as fe,$ as ve,af as ye,ag as be,a1 as xe,C as he,D as ke}from"./BVzA7Ocv.js";import{c as O,a as Ce,b as ge,f as we,d as $e}from"./CHVAF33P.js";import{u as Ie}from"./DqPRil-2.js";const Se={__name:"filter-tab",props:{filter:{type:Object,required:!0},active:{type:String,required:!0}},emits:["click"],setup(a,{emit:m}){const s=m;return(b,f)=>{const p=R;return l(),v(p,{onClick:f[0]||(f[0]=c=>s("click",a.filter)),class:ne(["text-xl",{active:a.active===a.filter.value}]),size:"small",type:"tertiary"},{default:o(()=>[g(d(a.filter.label),1)]),_:1},8,["class"])}}},Be=j(Se,[["__scopeId","data-v-1100ad1c"]]),Oe={class:"flex justify-between w-full mb-4"},Ne={__name:"filter-tabs",props:{filters:{type:Array,default:()=>[]},active:{type:String,default:"Wszystkie"}},emits:["click"],setup(a,{emit:m}){const s=m;return(b,f)=>{const p=Be;return l(),w("div",Oe,[(l(!0),w(U,null,q(a.filters,c=>(l(),v(p,{key:c,filter:c,active:a.active,onClick:r=>s("click",c)},null,8,["filter","active","onClick"]))),128))])}}},Ee={class:"flex overflow-auto gap-2 w-full"},ze={__name:"filter-pills",props:{filters:{type:Array,default:()=>[]}},setup(a){const m=Q(),{selectedPeriod:s,startDate:b,endDate:f,shopName:p,expenseName:c,startPrice:r,endPrice:x,category:N}=H(m),{queryExpenses:P,updatePeriod:D,updateEndDate:E,updateStartDate:W,updateStartPrice:T,updateEndPrice:M,updateShopName:n,updateExpenseName:z,updateCategory:V}=m,A=$(()=>s.value.label?s.value.label:b.value&&f.value?`${b.value} - ${f.value}`:""),S=$(()=>r.value&&x.value?`${r.value} - ${x.value}`:r.value?`od ${r.value}`:x.value?`do ${x.value}`:""),y=async i=>{switch(i){case"shopName":n("");break;case"expenseName":z("");break;case"category":V("");break;case"priceRange":T(null),M(null);break;case"selectedPeriod":D({value:"month",label:"Bieżący miesiąc"});break}await P()};return(i,_)=>{const h=X,k=R,C=oe;return l(),w("div",Ee,[e(C,null,{default:o(()=>[g(d(t(A))+" ",1),t(s).value!=="month"?(l(),v(k,{key:0,type:"tertiary",size:"small",onClick:_[0]||(_[0]=I=>y("selectedPeriod"))},{default:o(()=>[e(h,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})):B("",!0)]),_:1}),t(p)?(l(),v(C,{key:0},{default:o(()=>[g(d(t(p))+" ",1),e(k,{type:"tertiary",size:"small",onClick:_[1]||(_[1]=I=>y("shopName"))},{default:o(()=>[e(h,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),t(N)?(l(),v(C,{key:1},{default:o(()=>[g(d(t(N))+" ",1),e(k,{type:"tertiary",size:"small",onClick:_[2]||(_[2]=I=>y("category"))},{default:o(()=>[e(h,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),t(c)?(l(),v(C,{key:2},{default:o(()=>[g(d(t(c))+" ",1),e(k,{type:"tertiary",size:"small",onClick:_[3]||(_[3]=I=>y("expenseName"))},{default:o(()=>[e(h,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0),t(S)?(l(),v(C,{key:3},{default:o(()=>[g(d(t(S))+" ",1),e(k,{type:"tertiary",size:"small",onClick:_[4]||(_[4]=I=>y("priceRange"))},{default:o(()=>[e(h,{icon:"ioniconsCloseOutline"in i?i.ioniconsCloseOutline:t(O)},null,8,["icon"])]),_:1})]),_:1})):B("",!0)])}}},Fe=j(ze,[["__scopeId","data-v-db18ab94"]]),Pe={class:"flex h-full w-full justify-between items-start"},De={class:"flex flex-col"},Te={class:"flex-flex-col"},Me={class:"text-base expense-shop"},Ve={class:"text-lg font-bold expense-date"},Ae={class:"flex items-end font-bold"},Le={class:"flex items-start"},je={class:"text-3xl price-big"},Re={class:"text-sm price-small"},We=se({__name:"item",props:{expense:{}},emits:["openEditExpense","removeExpense"],setup(a,{emit:m}){const s=a,b=$(()=>parseInt(s.expense.value)),f=$(()=>(Number(s.expense.value)-Math.floor(Number(s.expense.value))).toFixed(2).toString().slice(2)),p=$(()=>s.expense.timestamp.seconds?new Date(s.expense.timestamp.seconds*1e3).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}):new Date(s.expense.timestamp).toLocaleString("default",{day:"numeric",month:"numeric",year:"numeric"}));return(c,r)=>{const x=le;return l(),v(x,{class:"flex flex-col py-2 pl-6 pr-2 bg-white rounded-2xl shadow-lg"},{default:o(()=>[u("div",Pe,[u("div",De,[u("div",Te,[u("p",Me,d(c.expense.shop)+" - "+d(c.expense.name)+" - "+d(c.expense.category.toLowerCase()),1)]),u("p",Ve,d(t(p)),1)]),u("div",Ae,[u("p",Le,[u("span",je,d(t(b)),1),u("span",Re,d(t(f)),1)])])])]),_:1})}}}),Ue=a=>(he("data-v-d0058a2f"),a=a(),ke(),a),qe={key:0,class:"w-full flex justify-center items-center h-full"},Qe={key:1},He={key:2,class:"h-full overflow-auto"},Xe={class:"text-2xl my-4 flex justify-between font-bold"},Ze=Ue(()=>u("span",null,"Razem ",-1)),Ge={__name:"index",setup(a){const m=localStorage.getItem("uid"),s=Q(),{queryExpenses:b,setCurrentExpense:f}=s,{expenses:p,isLoading:c}=H(s),r=ae("all"),x=[{value:"all",label:"Wszystkie"},{value:"my",label:"Moje"},{value:"common",label:"Wspólne"}];Ie(async()=>{await b()},"$biXQIOSgVL");const N=n=>{f(n),L(`/expenses/${n.id}`)},P=()=>{L("/expenses/new")},D=$(()=>parseFloat(E.value.reduce((n,z)=>Number(n)+Number(z.value),0)).toFixed(2)),E=$(()=>r.value==="all"?p.value:r.value==="my"?p.value.filter(n=>n.userId===m&&n.familyMembers.length===0):p.value.filter(n=>n.userId===m&&n.familyMembers.length>0||n.familyMembers.includes(m))),W=async()=>{await ce.open("expense-filter")},T=n=>{n.label==="Wszystkie"?r.value="all":n.label==="Moje"?r.value="my":r.value="common"},M=()=>{L("/expenses/charts")};return(n,z)=>{const V=re,A=ue,S=de,y=X,i=R,_=pe,h=_e,k=Ne,C=Fe,I=me,Z=fe,G=We,J=ve,K=ye,Y=be,ee=xe,te=ie;return l(),v(te,null,{default:o(()=>[e(h,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[e(_,null,{default:o(()=>[e(V,null,{default:o(()=>[g("Wydatki")]),_:1}),e(S,{slot:"start"},{default:o(()=>[e(A,{text:"",icon:"ioniconsArrowBackOutline"in n?n.ioniconsArrowBackOutline:t(Ce)},null,8,["icon"])]),_:1}),e(S,{slot:"end"},{default:o(()=>[e(i,{type:"tertiary",onClick:M},{default:o(()=>[e(y,{slot:"icon-only",icon:"ioniconsBarChartOutline"in n?n.ioniconsBarChartOutline:t(ge)},null,8,["icon"])]),_:1}),e(i,{type:"tertiary",onClick:W},{default:o(()=>[e(y,{slot:"icon-only",icon:"ioniconsFilter"in n?n.ioniconsFilter:t(we)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:o(()=>[u("div",null,[e(k,{filters:x,active:t(r),onClick:T},null,8,["active"]),e(C)]),t(c)?(l(),w("div",qe,[e(I,{name:"lines-sharp"})])):!t(c)&&!t(E).length?(l(),w("h2",Qe,"Brak wydatków")):(l(),w("div",He,[u("div",Xe,[Ze,u("span",null,d(t(D))+" zł",1)]),e(Z,{class:"mb-6"}),e(J,{lines:"none",class:"overflow-auto h-[70%]"},{default:o(()=>[(l(!0),w(U,null,q(t(E),F=>(l(),v(G,{key:`${F.name}-${F.id}`,expense:F,onClick:()=>N(F)},null,8,["expense","onClick"]))),128))]),_:1})])),e(Y,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[e(K,{onClick:P},{default:o(()=>[e(y,{icon:"ioniconsAdd"in n?n.ioniconsAdd:t($e)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})}}},et=j(Ge,[["__scopeId","data-v-d0058a2f"]]);export{et as default};
