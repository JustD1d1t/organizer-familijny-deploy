import{r as i,L as H,i as Q,N as k,A as o,Z as X,t as c,z as e,B as r,O as l,a2 as C,v as b,Q as A,R as h,x as Y,y as T,P as q,a3 as G,S as J,T as ee,U as oe,V as te,W as ne,a4 as ae,a5 as le,X as se,a6 as ue,a7 as ie,Y as ce,$ as re,a8 as de,a9 as _e,a1 as me,aa as pe}from"./BtlW2p2z.js";import{_ as ye}from"./if8qalBg.js";import{u as fe}from"./Duzz0qj9.js";const ge={class:"px-2 py-4"},ve={key:0},Ie={__name:"index",setup(ke){const p=i(!1),u=i(""),d=i(0),{billCategories:S}=G(),V=fe(),{saveBudgetDetails:x}=V,{budgetDetails:I}=H(V),m=i(I.value.monthlyIncome),s=i(I.value.items||[]),y=i(null),f=()=>{p.value=!1,u.value="",d.value=0},z=()=>{p.value=!0},D=()=>{if(s.value.some(t=>t.category===u.value)){y.value="Kategoria już istnieje";return}s.value.push({category:u.value,amount:d.value}),f()},M=Q(()=>S.filter(a=>!s.value.some(t=>t.category===a))),O=a=>{s.value=s.value.filter(t=>t.category!==a.category)},U=async()=>{const a=s.value.map(t=>({category:t.category,amount:t.amount}));await x(a,m.value)};return(a,t)=>{const j=J,N=ee,L=oe,R=te,Z=ne,g=ae,w=le,_=se,K=me,B=ye,P=pe,W=ue,$=ie,E=ce,F=X;return c(),k(F,null,{default:o(()=>[e(Z,{style:{background:"var(--ion-color-light)"}},{default:o(()=>[e(R,null,{default:o(()=>[e(j,null,{default:o(()=>[r("Budżet")]),_:1}),e(L,{slot:"start"},{default:o(()=>[e(N,{text:"",icon:"ioniconsArrowBackOutline"in a?a.ioniconsArrowBackOutline:l(re)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),e(E,{fullscreen:!0,class:"h-dvh overflow-hidden"},{default:o(()=>[e(B,null,{default:o(()=>[e(g,{label:"Miesięczny przychód",modelValue:l(m),"onUpdate:modelValue":t[0]||(t[0]=n=>C(m)?m.value=n:null),type:"number"},null,8,["modelValue"]),(c(!0),b(h,null,A(l(s),n=>(c(),k(K,{class:"flex items-end justify-between",key:n.category},{default:o(()=>[e(g,{label:n.category,modelValue:n.amount,"onUpdate:modelValue":v=>n.amount=v,type:"number",slot:"start",class:"w-5/6"},null,8,["label","modelValue","onUpdate:modelValue"]),e(_,{type:"tertiary",onClick:()=>O(n),class:"mb-2"},{default:o(()=>[e(w,{slot:"icon-only",icon:"ioniconsTrash"in a?a.ioniconsTrash:l(de)},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),e(_,{type:"tertiary",class:"w-full",onClick:z},{default:o(()=>[e(w,{slot:"icon-only",icon:"ioniconsAdd"in a?a.ioniconsAdd:l(_e)},null,8,["icon"]),r(" Dodaj kategorię wydatków ")]),_:1}),e(_,{class:"w-full",onClick:U},{default:o(()=>[r(" Zapisz ")]),_:1}),e($,{class:"auto-height","is-open":l(p),onWillDismiss:f},{default:o(()=>[Y("div",ge,[e(B,null,{default:o(()=>[e(W,{label:"Kategoria",modelValue:l(u),"onUpdate:modelValue":t[1]||(t[1]=n=>C(u)?u.value=n:null)},{default:o(()=>[(c(!0),b(h,null,A(l(M),(n,v)=>(c(),k(P,{key:v,value:n},{default:o(()=>[r(T(n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(y)?(c(),b("p",ve,T(l(y)),1)):q("",!0),e(g,{label:"Miesięczny limit",modelValue:l(d),"onUpdate:modelValue":t[2]||(t[2]=n=>C(d)?d.value=n:null),type:"number"},null,8,["modelValue"])]),_:1}),e(_,{type:"primary",class:"w-full",onClick:D},{default:o(()=>[r(" Zapisz ")]),_:1}),e(_,{type:"tertiary",class:"w-full",onClick:f},{default:o(()=>[r(" Anuluj ")]),_:1})])]),_:1},8,["is-open"])]),_:1})]),_:1})}}};export{Ie as default};
