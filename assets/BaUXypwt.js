import{aw as F,M as d,ax as R,N as j,i as M,O as f,A as t,aQ as A,a6 as E,t as c,z as r,Q as n,B as m,y as N,R as p,x as O,v as Q,a3 as Z,W as $,X as H,U as P,a5 as W}from"./BeL7Np4Z.js";const X={key:0,class:"w-full flex justify-between flex-wrap"},K={__name:"index",setup(q){const v=F(),{updateNotification:g,sendNotification:w}=v,{notifications:S}=d(v),y=R(),{updateMembers:k,getFamilyDetails:B}=y,{familyMembersDetails:s,familyMembers:C}=d(y),D=j(),{email:T,uid:u}=d(D),U=A().params,e=M(()=>S.value.find(o=>o.id===U.id)),z=M(()=>T.value),b=async o=>{const a={...e.value,accepted:o};await B(e.value.ownerId),await g(a);const l=[...s.value].find(i=>i.id===u.value);e.value.accepted=o,o?(l&&(l.status="accepted"),await k(s.value,[...C.value,u.value],e.value.ownerId),await w({title:`Użytkownik "${z.value}" zaakceptował zaproszenie do rodziny`,content:"Zaproszenie do listy nie zostało zaakceptowane"},e.value.ownerId)):(await w({title:`Użytkownik "${z.value}" nie zaakceptował zaproszenie do rodziny`,content:"Zaproszenie do listy zostało nie zaakceptowane"},e.value.ownerId),s=s.filter(i=>i.id!==u.value),await k(s,_,e.value.ownerId))};return(o,a)=>{const I=Z,l=$,i=H,x=P,V=W,h=E;return c(),f(h,null,{default:t(()=>[r(i,{style:{background:"var(--ion-color-light)"}},{default:t(()=>[r(l,null,{default:t(()=>[n(e)?(c(),f(I,{key:0},{default:t(()=>[m(N(n(e).title),1)]),_:1})):p("",!0)]),_:1})]),_:1}),n(e)?(c(),f(V,{key:0},{default:t(()=>[O("div",null,N(n(e).content),1),n(e).type==="invitation-to-family"&&n(e).accepted===void 0?(c(),Q("div",X,[r(x,{onClick:a[0]||(a[0]=()=>b(!1)),color:"danger"},{default:t(()=>[m(" Odrzuć ")]),_:1}),r(x,{onClick:a[1]||(a[1]=()=>b(!0)),color:"success"},{default:t(()=>[m(" Akceptuj ")]),_:1})])):p("",!0)]),_:1})):p("",!0)]),_:1})}}};export{K as default};
