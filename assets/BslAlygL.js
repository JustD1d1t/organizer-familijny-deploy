import{aA as U,r as s,N as h,A as a,a1 as B,t as S,z as e,B as d,x as z,P as r,ah as f,l as H,a6 as L,V as A,W as P,ae as R,T as O,a0 as Z,ap as $,a3 as J}from"./idRAp1hA.js";import{_ as W}from"./BuW8TgiA.js";import{_ as q}from"./BhJi4la3.js";const D={class:"flex items-center h-full w-full"},Q={__name:"index",setup(F){const{backendUrl:g}=$(),j=U(),{registerUser:y}=j,{openToast:v}=J(),n=s(""),t=s(""),u=s(""),i=s(""),c=s(""),_=s(""),V=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(l).toLowerCase()),I=async()=>{if(i.value="",c.value="",_.value="",n.value||(i.value="Email jest wymagany."),V(n.value)||(i.value="Nieprawidłowy format email."),t.value||(c.value="Hasło jest wymagane."),t.value.length<6&&(c.value="Hasło musi mieć co najmniej 6 znaków."),u.value||(_.value="Nazwa jest wymagana."),!(i.value||c.value||_.value))try{const l=await y(n.value,t.value,u.value);if(l.error){v(l.error,"danger");return}const o=l.localId;await fetch(`${g}/users/add-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{uid:o,email:n.value.toLowerCase()}})}),v("Zarejestrowano pomyślnie"),H("/login")}catch(l){console.log(l)}};return(l,o)=>{const b=L,x=A,k=P,p=W,C=R,w=O,N=q,T=Z,E=B;return S(),h(E,null,{default:a(()=>[e(k,null,{default:a(()=>[e(x,null,{default:a(()=>[e(b,null,{default:a(()=>[d("Rejestracja")]),_:1})]),_:1})]),_:1}),e(T,{fullscreen:!0},{default:a(()=>[z("div",D,[e(N,{class:"p-8 w-full"},{title:a(()=>[d(" Rejestracja ")]),default:a(()=>[e(C,{class:"pb-4"},{default:a(()=>[e(p,{class:"w-full",label:"Email",type:"email",modelValue:r(n),"onUpdate:modelValue":o[0]||(o[0]=m=>f(n)?n.value=m:null),error:r(i)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Hasło",type:"password",modelValue:r(t),"onUpdate:modelValue":o[1]||(o[1]=m=>f(t)?t.value=m:null),error:r(c)},null,8,["modelValue","error"]),e(p,{class:"w-full",label:"Nazwa",modelValue:r(u),"onUpdate:modelValue":o[2]||(o[2]=m=>f(u)?u.value=m:null),error:r(_)},null,8,["modelValue","error"])]),_:1}),e(w,{class:"w-full mt-4",expand:"block",onClick:I},{default:a(()=>[d("Zarejestruj")]),_:1}),e(w,{class:"w-full mt-4",expand:"block",fill:"outline","router-link":"/login"},{default:a(()=>[d("Logowanie")]),_:1})]),_:1})])]),_:1})]),_:1})}}};export{Q as default};
