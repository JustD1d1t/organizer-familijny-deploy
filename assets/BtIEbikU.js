import{t as o,N as m,A as n,z as t,B as x,y as j,O as e,bo as be,P as B,al as P,a5 as W,a1 as T,aF as O,i as b,x as l,v as g,aS as V,a8 as ze,l as Z,bp as Se,X as we,_ as E,aO as Ce,L as N,R as S,Q as L,ag as F,ap as G,aq as K,aG as Q,r as R,Z as $e,T as Le,U as Be,S as Ae,V as xe,W as je,a7 as De,as as Re,at as Me,Y as Pe,$ as Te,b3 as Oe}from"./C1Km0ovS.js";import{_ as We,a as Ne}from"./DrPyzT2Z.js";import{_ as Fe}from"./YS5LXMaE.js";import{_ as Ue}from"./BfeF3ZS4.js";import{u as qe}from"./4c2pv963.js";import{_ as He}from"./OC_iv7tp.js";const Ve={__name:"PopoverItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1}},setup(a){return(f,c)=>{const k=P,s=W,u=T;return o(),m(u,null,{default:n(()=>[t(k,null,{default:n(()=>[x(j(a.label),1)]),_:1}),a.active?(o(),m(s,{key:0,slot:"end",icon:"ioniconsCheckmarkOutline"in f?f.ioniconsCheckmarkOutline:e(be)},null,8,["icon"])):B("",!0)]),_:1})}}},Ze={__name:"sort-and-filter",props:{layout:{type:String,required:!0},dir:{type:String,required:!0},nameDir:{type:String,required:!0},lastSort:{type:String,required:!0}},emits:["changeLayout","sortByCategory","sortByName","openPantryModal","removeAllItems","removeSelectedItems","selectAllItems","deselectAllItems"],setup(a,{emit:f}){const c=f;return(k,s)=>{const u=Ve,h=We,p=Ne;return o(),m(p,{sortId:"shopping-list-sort"},{default:n(()=>[t(u,{onClick:s[0]||(s[0]=i=>c("changeLayout","category")),label:"Widok kategorii",active:a.layout==="category"},null,8,["active"]),t(u,{onClick:s[1]||(s[1]=i=>c("changeLayout","products")),label:"Widok produktów",active:a.layout==="products"},null,8,["active"]),a.layout==="products"?(o(),m(h,{key:0,label:"Sortuj po kategorii",onClick:s[2]||(s[2]=i=>c("sortByCategory")),type:"amount",dir:a.dir,active:a.lastSort==="category"},null,8,["dir","active"])):B("",!0),a.layout==="products"?(o(),m(h,{key:1,label:"Sortuj po nazwie",onClick:s[3]||(s[3]=i=>c("sortByName")),type:"amount",dir:a.nameDir,active:a.lastSort==="name"},null,8,["dir","active"])):B("",!0),t(u,{onClick:s[4]||(s[4]=i=>c("openPantryModal")),label:"Dodaj zaznaczone produkty do spiżarni"}),t(u,{onClick:s[5]||(s[5]=i=>c("removeAllItems")),label:`Usuń wszystkie\r
        produkty`}),t(u,{onClick:s[6]||(s[6]=i=>c("removeSelectedItems")),label:"Usuń zakupione produkty"}),t(u,{onClick:s[7]||(s[7]=i=>c("selectAllItems")),label:"Zaznacz wszystkie produkty"}),t(u,{onClick:s[8]||(s[8]=i=>c("deselectAllItems")),label:"Odznacz wszystkie produkty"})]),_:1})}}},Ee={class:"flex flex-col grow ml-4"},Ge={class:"text-base"},Ke={class:"text-xs"},Qe={key:0},Xe=["src"],X={__name:"item",props:{item:{type:Object,default:()=>{}}},setup(a){const{shoppingItems:f}=qe(),c=a,k=O(),{removeItem:s,handleItemChange:u}=k,h=b(()=>{const p=f.find(i=>i.category===c.item.category);return p?p.icon:""});return(p,i)=>{const d=Ue;return o(),m(d,{item:c.item,"handle-item-change":()=>e(u)(c.item),removeItem:()=>e(s)(a.item)},{label:n(()=>[l("div",Ee,[l("span",Ge,j(a.item.name),1),l("span",Ke,j(a.item.category),1)]),e(h)?(o(),g("div",Qe,[l("img",{src:e(h),alt:"category image",class:"w-8 h-8 mr-2"},null,8,Xe)])):B("",!0)]),_:1},8,["item","handle-item-change","removeItem"])}}},Y={__name:"recipe",props:{recipe:{type:Object,default:()=>{}},recipes:{type:Array,default:()=>[]}},setup(a){const f=O(),{setCurrentRecipe:c,removeRecipe:k,handleRecipeChange:s}=f,u=V(),h=a,p=b(()=>h.recipe.ingredients.every(d=>d.checked)),i=d=>{Z(`/shopping-lists/${u.params.id}/recipe/${d}`),c(h.recipe)};return(d,r)=>{const _=Se,y=P,v=W,w=we,$=T;return o(),m($,{class:"border-0"},{default:n(()=>[t(_,{slot:"start",class:"mr-0","aria-label":"Toggle task completion",onIonChange:r[0]||(r[0]=D=>e(s)(D.detail.checked,h.recipe)),checked:e(p)},null,8,["checked"]),t(y,{class:"border-0 grow ml-4",onClick:r[1]||(r[1]=()=>i(a.recipe.id))},{default:n(()=>[x(j(a.recipe.name),1)]),_:1}),t(w,{slot:"end",onClick:r[2]||(r[2]=()=>e(k)(h.recipe.id)),size:"small",type:"tertiary"},{default:n(()=>[t(v,{icon:"ioniconsTrash"in d?d.ioniconsTrash:e(ze)},null,8,["icon"])]),_:1})]),_:1})}}},Ye={};function Je(a,f){return o(),g("span",null,[Ce(a.$slots,"default",{},void 0,!0)])}const J=E(Ye,[["render",Je],["__scopeId","data-v-a302f0dd"]]),et={key:1},tt={__name:"products",props:{nameDir:{type:String,default:""},dir:{type:String,default:""},lastSort:{type:String,default:""}},setup(a){const f=O(),c=a,{currentShoppingList:k}=N(f),s=b(()=>k?k.value.items:[]),u=b(()=>k.value?k.value.recipes:[]),h=b(()=>{if(s.value){let _=[...s.value];return c.lastSort==="category"?_=_.sort((y,v)=>c.dir==="asc"?y.category.localeCompare(v.category):v.category.localeCompare(y.category)):c.lastSort==="name"&&(_=_.sort((y,v)=>c.nameDir==="asc"?y.name.localeCompare(v.name):v.name.localeCompare(y.name))),_}return[]}),p=b(()=>h.value.filter(_=>!_.checked)),i=b(()=>h.value.filter(_=>_.checked)),d=b(()=>u.value.filter(_=>_.ingredients.every(y=>!y.checked))),r=b(()=>u.value.filter(_=>_.ingredients.every(y=>y.checked)));return(_,y)=>{const v=X,w=Y,$=He,D=J,z=F;return o(),g(S,null,[e(p).length||e(d).length?(o(),m($,{key:0,lines:!0},{default:n(()=>[(o(!0),g(S,null,L(e(p),I=>(o(),m(v,{key:I,item:I},null,8,["item"]))),128)),(o(!0),g(S,null,L(e(d),I=>(o(),m(w,{key:I.id,recipe:I,recipes:e(u)},null,8,["recipe","recipes"]))),128))]),_:1})):B("",!0),e(i).length||e(r).length?(o(),g("div",et,[t(D,null,{default:n(()=>[x("Kupione")]),_:1}),t(z,{inset:!0,class:"overflow-auto py-0"},{default:n(()=>[(o(!0),g(S,null,L(e(i),I=>(o(),m(v,{key:I,item:I},null,8,["item"]))),128)),(o(!0),g(S,null,L(e(r),I=>(o(),m(w,{key:I.id,recipe:I,recipes:e(u)},null,8,["recipe","recipes"]))),128))]),_:1})])):B("",!0)],64)}}},ot=E(tt,[["__scopeId","data-v-1f8eb9fb"]]),nt={class:"ion-padding",slot:"content"},st={key:0},lt={__name:"sorted-by-category",setup(a){const f=O(),{handleItemChange:c,removeItem:k}=f,{currentShoppingList:s}=N(f);b(()=>s.value?s.value.items:[]);const u=b(()=>s.value?s.value.recipes:[]),h=b(()=>{const p={};return s.value.items.forEach(i=>{p[i.category]||(p[i.category]={checked:[],unchecked:[]}),i.checked?p[i.category].checked.push(i):p[i.category].unchecked.push(i)}),p});return(p,i)=>{const d=P,r=T,_=X,y=F,v=J,w=G,$=K,D=Y;return o(),g(S,null,[t($,null,{default:n(()=>[(o(!0),g(S,null,L(e(h),(z,I)=>(o(),m(w,{key:I,value:z},{default:n(()=>[t(r,{slot:"header",color:"light"},{default:n(()=>[t(d,null,{default:n(()=>[x(j(I),1)]),_:2},1024)]),_:2},1024),l("div",nt,[t(y,{inset:!0,class:"overflow-auto"},{default:n(()=>[(o(!0),g(S,null,L(z.unchecked,C=>(o(),m(_,{key:C,item:C,onRemoveItem:()=>e(k)(C),onHandleItemChange:()=>e(c)(C)},null,8,["item","onRemoveItem","onHandleItemChange"]))),128))]),_:2},1024),z.checked.length?(o(),g("div",st,[t(v,null,{default:n(()=>[x("Kupione")]),_:1}),t(y,{inset:!0,class:"overflow-auto"},{default:n(()=>[(o(!0),g(S,null,L(z.checked,C=>(o(),m(_,{key:C,item:C,onRemoveItem:()=>e(k)(C),onHandleItemChange:()=>e(c)(C)},null,8,["item","onRemoveItem","onHandleItemChange"]))),128))]),_:2},1024)])):B("",!0)])]),_:2},1032,["value"]))),128))]),_:1}),t(y,{inset:!0,class:"overflow-auto"},{default:n(()=>[(o(!0),g(S,null,L(e(u),z=>(o(),m(D,{key:z.id,recipe:z,recipes:e(u)},null,8,["recipe","recipes"]))),128))]),_:1})],64)}}},at={class:"inner-content"},it=l("h2",null,"wybierz spiżarnię",-1),ct=l("h2",null,"Twoje spiżarnie",-1),rt={key:0},ut={__name:"select-pantry-modal",props:{cancel:{type:Function,default:()=>{}},confirmModal:{type:Function,default:()=>{}}},setup(a){const f=Q(),{pantries:c,collaboratedPantries:k}=f;return(s,u)=>{const h=P,p=T,i=F;return o(),g("div",at,[it,t(i,{lines:"none"},{default:n(()=>[ct,(o(!0),g(S,null,L(e(c),d=>(o(),m(p,{key:d.id,onClick:r=>a.confirmModal(d)},{default:n(()=>[t(h,null,{default:n(()=>[x(j(d.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e(k)&&e(k).length?(o(),g("h2",rt," Spiżarnie do których Cię dodano ")):B("",!0),(o(!0),g(S,null,L(e(k),d=>(o(),m(p,{key:d.id,onClick:r=>a.confirmModal(d)},{default:n(()=>[t(h,null,{default:n(()=>[x(j(d.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])}}},dt={class:"h-[90%]"},_t={class:"h1"},pt={key:0},mt=l("b",null,"Czy wiesz, że...",-1),yt={class:"ion-padding",slot:"content"},kt=l("br",null,null,-1),ht=l("p",null,' Wystarczy, że klikniesz w ikonę "3 kropek" w prawym górnym rogu ',-1),gt=l("br",null,null,-1),ft=l("p",null,"Możesz:",-1),vt=l("ul",{class:"my-2"},[l("li",null,"Wyświetlać produkty lub pogrupować po kategorii, żebyś kupił wszystko w danej alejce sklepu"),l("li",null,"Możesz sortować po nazwie lub kategorii, ale tylko w widoku produktów"),l("li",null,"Możesz dodawać zaznaczone produkty do spiżarni"),l("li",null,"Zaznaczać lub odznaczać wszystkie produkty"),l("li",null,"Usuwać wszystkie lub tylko zakupione produkty")],-1),It={key:1},bt=l("br",null,null,-1),zt=l("p",null,' Wystarczy, że klikniesz w przycisk "+" na dole ekranu i przejdziesz do strony z dodawaniem artykułów do listy zakupowej ',-1),St=l("br",null,null,-1),wt=l("p",null,"Możesz:",-1),Ct=l("ul",null,[l("li",null,"szukać artykułów w danej kategorii"),l("li",null," wyszukać artykuł spośród wszystkich kategorii "),l("li",null," doodać swój produkt, jeśli nie znaleziono produktu w żadnej z kategorii. Twój produkt zostanie dodany bez kategorii ")],-1),$t=l("br",null,null,-1),Lt=l("p",{class:"h3 font-bold"}," Dodaj swój pierwszy produkt do listy zakupowej ",-1),Mt={__name:"index",setup(a){const f=V(),c=Q(),{handlePantryItemsFromShoppingList:k}=c,s=O(),{updateShoppingList:u,removeAllItems:h,selectAllItems:p,deselectAllItems:i,removeSelectedItems:d}=s,{currentShoppingList:r}=N(s),_=R("products"),y=R("asc"),v=R("asc"),w=R(""),$=R(!1),D=R(),z=()=>$.value=!1,I=async A=>{const U=r.value.items.filter(M=>M.checked);r.value.items=r.value.items.filter(M=>!M.checked),await k(U,A),await u({...r.value,items:r.value.items}),$.value=!1},C=b(()=>r!=null&&r.value?r.value.name:""),ee=()=>{y.value=y.value==="asc"?"desc":"asc",w.value="category"},te=()=>{v.value=v.value==="asc"?"desc":"asc",w.value="name"},oe=A=>{_.value=A},ne=()=>{Z(`/shopping-lists/${f.params.id}/add-item`)},se=()=>{$.value=!0};return(A,U)=>{const M=Le,q=Be,le=Ae,ae=Ze,ie=xe,ce=je,re=P,ue=T,H=Fe,de=G,_e=K,pe=ot,me=lt,ye=ut,ke=De,he=W,ge=Re,fe=Me,ve=Pe,Ie=$e;return o(),m(Ie,null,{default:n(()=>[t(ce,{style:{background:"var(--ion-color-light)"}},{default:n(()=>[t(ie,null,{default:n(()=>[t(q,{slot:"start"},{default:n(()=>[t(M,{text:"",icon:"ioniconsArrowBackOutline"in A?A.ioniconsArrowBackOutline:e(Te)},null,8,["icon"])]),_:1}),t(le,null,{default:n(()=>[x("Listy zakupowe")]),_:1}),e(r).items.length||e(r).recipes.length?(o(),m(q,{key:0,slot:"end"},{default:n(()=>[t(ae,{layout:e(_),dir:e(y),nameDir:e(v),lastSort:e(w),onChangeLayout:oe,onSortByCategory:ee,onSortByName:te,onOpenPantryModal:se,onRemoveAllItems:e(h),onRemoveSelectedItems:e(d),onSelectAllItems:e(p),onDeselectAllItems:e(i)},null,8,["layout","dir","nameDir","lastSort","onRemoveAllItems","onRemoveSelectedItems","onSelectAllItems","onDeselectAllItems"])]),_:1})):B("",!0)]),_:1})]),_:1}),t(ve,null,{default:n(()=>[l("div",dt,[l("h2",_t,j(e(C)),1),e(r).items.length||e(r).recipes.length?(o(),g("div",pt,[t(_e,null,{default:n(()=>[t(de,{value:"first"},{default:n(()=>[t(ue,{slot:"header",color:"light"},{default:n(()=>[t(re,null,{default:n(()=>[mt]),_:1})]),_:1}),l("div",yt,[t(H,{subtitle:"Możesz zmieniać widoki, sortować i przeprowadzać masowe operacje na produktach?",icon:"ioniconsBulb",class:"mb-4 mt-2"},{default:n(()=>[kt,ht,gt,ft,vt]),_:1})])]),_:1})]),_:1}),e(_)=="products"?(o(),m(pe,{key:0,dir:e(y),nameDir:e(v),lastSort:e(w)},null,8,["dir","nameDir","lastSort"])):(o(),m(me,{key:1}))])):(o(),g("div",It,[t(H,{title:"Czy wiesz, że...",subtitle:"Możesz dodawać produkty z naszej bazy lub swoje własne?",icon:"ioniconsBulb",class:"mt-8"},{default:n(()=>[bt,zt,St,wt,Ct,$t,Lt]),_:1})])),t(ke,{class:"auto-height",ref_key:"modal",ref:D,"is-open":e($),onWillDismiss:z},{default:n(()=>[t(ye,{cancel:z,confirmModal:I})]),_:1},8,["is-open"]),t(fe,{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:n(()=>[t(ge,{onClick:ne},{default:n(()=>[t(he,{icon:"ioniconsAddCircle"in A?A.ioniconsAddCircle:e(Oe),size:"large"},null,8,["icon"])]),_:1})]),_:1})])]),_:1})]),_:1})}}};export{Mt as default};
