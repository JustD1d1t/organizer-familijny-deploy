import{L as $,u as q,r as l,N as g,A as a,a1 as J,t as u,z as t,B as h,x as f,P as s,ah as c,v as w,S as I,R as k,Q as X,T as ee,U as oe,V as te,W as ne,ai as ae,Z as le,Y as se,aj as ue,ae as re,a0 as ce,y as de,a2 as ie,a4 as _e,a5 as me}from"./B4ggqkCG.js";import{_ as pe}from"./PzQkjnDX.js";import{u as ve}from"./Dp3SNSze.js";const fe={class:"inner-content"},be={class:"flex justify-between"},ye=f("span",null," Zrób zdjęcie",-1),ge=f("span",null," Wybierz zdjęcie",-1),we={key:0},ke={__name:"index",setup(Ve){const{photos:V,photoFromCamera:C,selectPhotoFromData:E}=ve(),B=$(),{addExpenseToStore:S}=B,N=localStorage.getItem("uid"),{billCategories:D}=ie(),P=q(),d=l(""),i=l(""),_=l(""),m=l(""),p=l(""),r=l([]),b=l(null),y=l(null),T=async()=>{try{const{pb64:n,doc:e}=await E();y.value=n,b.value=e}catch(n){console.error("Error selecting photo",n)}},U=async()=>{try{const{pb64:n,doc:e}=await C();y.value=n,b.value=e,photoEdited.value=!0}catch(n){console.error("Error adding photo",n)}},j=async()=>{const n={name:i.value.toLowerCase(),value:parseFloat(_.value),timestamp:new Date(m.value).getTime(),shop:p.value.toLowerCase(),userId:N,familyMembers:r.value,category:d.value};await S(n,b.value,y.value),P.back()},z=n=>{r.value.includes(n.id)?r.value=r.value.filter(e=>e!=n.id):r.value.push(n.id)};return(n,e)=>{const F=ee,L=oe,M=te,R=ne,v=ae,W=_e,Z=le,A=se,G=pe,x=ue,H=re,K=me,O=ce,Q=J;return u(),g(Q,null,{default:a(()=>[t(R,{style:{background:"var(--ion-color-light)"}},{default:a(()=>[t(M,null,{default:a(()=>[t(L,{slot:"end"},{default:a(()=>[t(F,{fill:"clear",strong:!0,onClick:e[0]||(e[0]=o=>j())},{default:a(()=>[h("Dodaj")]),_:1})]),_:1})]),_:1})]),_:1}),t(O,null,{default:a(()=>[f("div",fe,[t(H,{lines:"none"},{default:a(()=>[t(v,{label:"Nazwa sklepu",modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=o=>c(p)?p.value=o:null)},null,8,["modelValue"]),t(v,{label:"Nawa wydatku",modelValue:s(i),"onUpdate:modelValue":e[2]||(e[2]=o=>c(i)?i.value=o:null)},null,8,["modelValue"]),t(v,{label:"Całkowita kwota",type:"number",modelValue:s(_),"onUpdate:modelValue":e[3]||(e[3]=o=>c(_)?_.value=o:null)},null,8,["modelValue"]),t(v,{label:"Data",type:"date",modelValue:s(m),"onUpdate:modelValue":e[4]||(e[4]=o=>c(m)?m.value=o:null)},null,8,["modelValue"]),t(A,null,{default:a(()=>[t(Z,{label:"Kategoria",modelValue:s(d),"onUpdate:modelValue":e[5]||(e[5]=o=>c(d)?d.value=o:null)},{default:a(()=>[(u(!0),w(k,null,I(s(D),(o,Y)=>(u(),g(W,{key:Y,value:o},{default:a(()=>[h(de(o),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(G,{onToggleMember:z}),f("div",be,[t(x,{onClick:U,type:"secondary"},{default:a(()=>[ye]),_:1}),t(x,{onClick:T,class:"ml-auto"},{default:a(()=>[ge]),_:1})])]),_:1}),s(V).length?(u(),w("div",we,[(u(!0),w(k,null,I(s(V),o=>(u(),g(K,{key:o.filepath,src:o.webviewPath},null,8,["src"]))),128))])):X("",!0)])]),_:1})]),_:1})}}};export{ke as default};
